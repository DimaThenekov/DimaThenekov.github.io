<!DOCTYPE html>
<html lang="ru" style="width: 100%;height:100%;background:rgb(34,34,36);font-family: 'Open Sans', sans-serif;">
	<head>
		<meta charset="UTF-8">
		<title>Сайт-портфолио Ценекова Дмитрия</title>
		<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADqUExURUdwTIF3XoNzRW9mRnVpQ4FyRHNoR15ZQ4d2ToR0RYRzRod9ZIR0RYV0R4+FaGBXPn9ySIV2SlpURm9mUYJzRX5wR4R0RWNbSWNcTYyDZoFxSUpDMIh2RVxURl5WSRIPDFRNQYV5VQsKCIJyRGFZSlhPQXduVycnJiQkIjczLKuXWHFpVYh7VBAODBoWDkQ+MU5FMw4NCnZkOrqkYG9oVx4eFSAcFSIbE7ijYZaBS6edfKqffoR0RaWaepyScqKXdx8fH56UdSMjIpmPcJSJbBoZFhAQDY18SSYmJXhvVl9YRbqwlIJyRNHKtJ8ddrgAAAA6dFJOUwD+7hYONCECB/hu/d6f/WpHlFT5gbmw9tPNWmDCxpiXdfrlzrw26u048qPF9KeIyv3Z57arO/13e/3CAhhGAAAB7ElEQVQ4y3WT6XKbMBCAOQQSpy+MHd8TO06nM23S9BYLWJgEk6Tv/zpdiTRxsPv9AEb7jXa1KzTtGMpMk1Dtf1DbvUB6XXI+ziYXYblHwsA+G+94ZYbhLBPl8IxB+9ty3wjZPvx2msUelzKWyYcQeqddKl3VmcgUQuR5OTZbcTL38lw05Pg16Ld2uBqVaf6PNE31RStHf5ThMsY4vjhPvQ17L0xHIpUkTxzjnHtzcrKDXOdPfxKeJChsSLuGPcf1BFHCSQ3m3GvCyuD5ySloZ5C/GgkvN2a7k+YmlNU1Qr7tnw79aiuUgU7qLdiZaa30PG3IxmfnjeOSgxAi01dUXS/yersoY4TShR7ijSnLcNCJIlsjwSxQzWBuL4jj2S+2GugSTx9HABONrGGtzmKuAam+suljXdd6XQ9uXABXY0PwVS22D3dDJdw+Km5vXEcKMRiWFCyjmrlQfWQ/f+x2xeFQPHzpOBBpNACnK4WJUwVSoJ/v73dFcdgpoUdprxHw/duN3gmXKMSWFQBEpkZdA6qZD+Bbb8LUAMcwHABHlfLsIFBNliigUaDgGwrMpJHZ892k25X5lg9qBxS+Ww1riDUS+0Nsh+v73U+NcDhcf3j52QJjqFHTNrHjxLaJFHbHArUt63icSyUUb4LkL1sQZ9CSE949AAAAAElFTkSuQmCC" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=800, initial-scale=1.0">
		<meta content='true' name='HandheldFriendly'/>
		<meta content='800' name='MobileOptimized'/>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="description" content="Проекты Ценекова Дмитрия">
		<meta name="keywords" content="Ценеков Дмитрий, Проекты, Сайт-портфолио">
		<meta name="author" content="dim0n4eg">
		<meta http-equiv="Cache-Control" content="public, max-age=86400">
		
		<script type="text/javascript">
			function constrain(a,b,c){return Math.min(Math.max(a,b),c)}
			// (вход, установка, п, и, д, период в секундах, мин.выход, макс. выход)
			var PIDdata=[];
			function computePID(input, setpoint, kp, ki, kd, dt, minOut, maxOut, num) {
			  var err = setpoint - input;
			  if (PIDdata[num]==undefined)
				PIDdata[num]=[0,0];
			  var integral = PIDdata[num][0], prevErr = PIDdata[num][1];
			  integral = constrain(integral + err * dt * ki, minOut, maxOut);
			  PIDdata[num][0] = integral;
			  var D = (err - prevErr) / dt;
			  PIDdata[num][0] = err;
			  return constrain(err * kp + integral + D * kd, minOut, maxOut);
			}
			function getPosition(e) {
				var rect = e.target.getBoundingClientRect();
				var x = -1;
				var y = -1;
				if ((e.clientX != undefined) && (e.clientX != undefined)) {
					x = e.clientX - rect.left;
					y = e.clientY - rect.top;
				} else
					if (e.touches != undefined)
						if (e.touches.length > 0) {
							x = e.touches[0].clientX - rect.left;
							y = e.touches[0].clientY - rect.top;
						} else if (e.changedTouches.length > 0) {
							x = e.changedTouches[0].clientX - rect.left;
							y = e.changedTouches[0].clientY - rect.top;
						}
				x=Math.round(x);
				y=Math.round(y);
				return (x + ':' + y);
			}
			function roundRect(ctx, x1, y1, x2, y2, radius) {
				radius = Math.min(radius, (x2 - x1) / 2, (y2 - y1) / 2); // избегаем артефактов, в случае если радиус скругления больше одной из сторон
				ctx.beginPath();
				ctx.moveTo(x1 + radius, y1);
				ctx.lineTo(x2 - radius, y1);
				ctx.arcTo(x2, y1, x2, y1 + radius, radius);
				ctx.lineTo(x2, y2 - radius);
				ctx.arcTo(x2, y2, x2 - radius, y2, radius);
				ctx.lineTo(x1 + radius, y2);
				ctx.arcTo(x1, y2, x1, y2 - radius, radius);
				ctx.lineTo(x1, y1 + radius);
				ctx.arcTo(x1, y1, x1 + radius, y1, radius);
				ctx.fill();
				ctx.stroke();
			}
			function containPoint(tX,tY,tW,tH,x, y) {
				return tX <= x && x <= tX + tW && tY <= y && y <= tY + tH;
			}
			function colorChannelMixer(colorChannelA, colorChannelB, amountToMix){
				var channelA = colorChannelA*amountToMix;
				var channelB = colorChannelB*(1-amountToMix);
				return parseInt(channelA+channelB);
			}
			function colorMixer(rgbA, rgbB, amountToMix){
				var r = colorChannelMixer(rgbA[0],rgbB[0],amountToMix);
				var g = colorChannelMixer(rgbA[1],rgbB[1],amountToMix);
				var b = colorChannelMixer(rgbA[2],rgbB[2],amountToMix);
				return "rgb("+r+","+g+","+b+")";
			}
			var _errors=[];function copyToClipboard(text){if(window.clipboardData&&window.clipboardData.setData){return window.clipboardData.setData("Text",text);}
			else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var textarea=document.createElement("textarea");textarea.textContent=text;textarea.style.position="fixed";document.body.appendChild(textarea);textarea.select();try{return document.execCommand("copy");}
			catch(ex){console.warn("Copy to clipboard failed.",ex);return prompt("Copy to clipboard: Ctrl+C, Enter",text);}
			finally{document.body.removeChild(textarea);}}}
			function _onerror(e,e2)
			{if(_errors.length==0)
			setTimeout(function(){alert(JSON.stringify(_errors));copyToClipboard(JSON.stringify(_errors));},1500);_errors.push([e,e2]);}
			window.onerror=function(){_onerror(Array.prototype.slice.call(arguments).join('; '),'window.onerror')};
			
			
			
			var buttons=[];
			function drawButton(ctx,x,y,h,w,v,style,num){
				switch(style) {
				  case 1: 
					var gradient = ctx.createLinearGradient(x,0, x+h,0);
					gradient.addColorStop(0, '#AAA');
					gradient.addColorStop(.1, colorMixer([221,221,221],[221,170,170],1-constrain(v,0,1)));
					gradient.addColorStop(.9, colorMixer([221,221,221],[221,170,170],1-constrain(v,0,1)));
					gradient.addColorStop(1, colorMixer([187,187,187],[187,119,119],1-constrain(v,0,1)));
					ctx.fillStyle = "#000000";
					ctx.strokeStyle = gradient;
					ctx.lineWidth = 15;
					roundRect(ctx,x,y,x+h,y+w,8);
					gradient = ctx.createLinearGradient(x,0, x+h,0);
					gradient.addColorStop(0, '#400');
					gradient.addColorStop(.03, '#800');
					gradient.addColorStop(.97, '#800');
					gradient.addColorStop(1, '#400');
					ctx.fillStyle = gradient;
					ctx.strokeStyle = gradient;
					ctx.lineWidth = 1;
					roundRect(ctx,x,y-w*v*0.7,x+h,y+w,8);
					gradient = ctx.createLinearGradient(x,0, x+h,0);
					gradient.addColorStop(0, '#B00');
					gradient.addColorStop(.8, '#F00');
					gradient.addColorStop(1, '#B00');
					ctx.fillStyle = gradient;
					ctx.strokeStyle = "#D00";
					ctx.lineWidth = 3;
					roundRect(ctx,x,y-w*v,x+h,y+w-w*v*0.7,14);
					ctx.textAlign = 'center';
					ctx.textBaseline = 'middle';
					for (var i=4;i>=0;i-=1){
						ctx.fillStyle = 'hsl(25,100%,'+(70-4*i)+'%)';
						ctx.font = Math.floor(w*0.3)+'px Arial';
						ctx.fillText(hitboxs[num][8], x+h/2+i/9,y+w/2-w*v+i);
					}
					
					
					hitboxs[num][0]=x;
					hitboxs[num][1]=y-w*1;
					hitboxs[num][2]=h;
					hitboxs[num][3]=w+w*1;
					while (hitboxs[num][7].length<4)
						hitboxs[num][7].push(computePID(hitboxs[num][4],hitboxs[num][5]+0.01*Math.sin((new Date)/300),0.1,0.1,0.1,1,-2,2,num));
					hitboxs[num][4]=constrain(hitboxs[num][4]+hitboxs[num][7].shift()/8,0.1,2);
					var e=hitboxs[num];
					if (hitboxs[num][5]>0.5 && (new Date)-hitboxs[num][6]>50 || !containPoint(e[0],e[1],e[2],e[3],mouselastX,mouselastY))
						hitboxs[num][5]=1;
					break;
				  default:
					console.log('drawButton error')
				}
			}
			var canvas, ctx;
			function onload(){
				setTimeout(()=>{console.log('Created by dim0n4eg')},100);
				canvas = document.getElementById('canvas');
				ctx = canvas.getContext("2d", {alpha:false,antialias:false,depth:false,desynchronized:true});	
				render();
				canvas.addEventListener('mousemove', mouseMove);
				canvas.addEventListener("touchmove", mouseMove);
				canvas.addEventListener('mousedown', mouseDown);
				canvas.addEventListener("touchstart", mouseDown);
				canvas.addEventListener('mouseup', mouseUp);
				canvas.addEventListener("touchend", mouseUp);
				canvas.addEventListener('mouseout', mouseUp);
				canvas.addEventListener("touchcancel", mouseUp);
			}
			hitboxs=[[0,0,0,0,1,1,new Date,[],'English'],[0,0,0,0,1,1,new Date,[],'Русский']];
			function render()
			{
				if (canvas.clientHeight != canvas.height || canvas.clientWidth != canvas.width) {
					canvas.height = canvas.clientHeight;
					canvas.width = canvas.clientWidth;
				}
				//ctx.fillStyle = "#4f51bf";
				//ctx.fillRect(0, 0, canvas.width, canvas.height);
				var cW = canvas.width, cH = canvas.height;
				var mWH = Math.min(cW,cH);
				var gradient = ctx.createLinearGradient(0,0, cW, cH); for (var i=0;i<36;i++) gradient.addColorStop(i/36, 'hsl(199,92%,'+(81-4*12)+'%)');
				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				for (var i=10;i>=0;i-=1){
					gradient = ctx.createLinearGradient(0,0, cW, cH); for (var j=0;j<36;j++) gradient.addColorStop(j/36, 'hsl(199,92%,'+(81-4*i)+'%)');
					ctx.fillStyle = gradient;
					ctx.strokeStyle = gradient;
					roundRect(ctx,cW/2-mWH*0.3+i/3,cH/2-mWH*0.2+3*i,cW/2+mWH*0.3+i/3,cH/2+mWH*0.2+3*i,8);
				}
				drawButton(ctx, cW/2-mWH*0.25, cH/2+mWH*0.071,  mWH*0.2, mWH*0.2/2, hitboxs[0][4]/2, 1, 0);
				drawButton(ctx, cW/2+mWH*0.05, cH/2+mWH*0.071,  mWH*0.2, mWH*0.2/2, hitboxs[1][4]/2, 1, 1);
				ctx.textAlign = 'center';
				ctx.textBaseline = 'middle';
				for (var i=8;i>=0;i-=1){
					ctx.fillStyle = 'hsl(25,100%,'+(70-4*i)+'%)';
					ctx.font = Math.floor(mWH*0.08)+'px Arial';
					ctx.fillText("Выберите язык", cW/2+i/9, cH/2-mWH*0.14+1*i);
					ctx.font = Math.floor(mWH*0.04)+'px Arial';
					ctx.fillText("Choose language", cW/2+i/9, cH/2-mWH*0.06+0.5*i);
				}
				requestAnimationFrame(render);
			}
			var mousestatus=0;
			var mouselastX=0,mouselastY=0;
			function hitboxMove(ind,isPress)
			{
			
				switch(ind) {
				  case 0:
				  case 1:
					if (isPress==0) hitboxs[ind][5]=0.9;
					if (isPress==1) hitboxs[ind][5]=0.3;
					if (isPress==2) {hitboxs[ind][5]=1; console.log(ind,isPress);}
					hitboxs[ind][6] = new Date;
					break;
				}
				 
			}
			function mouseDown(e)
			{
				mousestatus = 1;
				mouselastX = parseFloat(getPosition(e).split(':')[0]);
				mouselastY = parseFloat(getPosition(e).split(':')[1]);
				mouseMove(e);
			}
			function mouseMove(e)
			{
				var posX = parseFloat(getPosition(e).split(':')[0]);
				var posY = parseFloat(getPosition(e).split(':')[1]);
				hitboxs.forEach((e,i) =>{if (containPoint(e[0],e[1],e[2],e[3],posX,posY)) hitboxMove(i,mousestatus)});
				mouselastX = posX;
				mouselastY = posY;
			}
			function mouseUp(e)
			{
				mousestatus = 2;
				mouseMove(e);
				mousestatus = 0;
			}
		</script>
		<style>
			
		</style>
	</head>
	<body onload="onload();">
		<canvas id="canvas" width="1920" height="1080" style="height:100%;width:100%;position: absolute;top: 0%;left: 0%;"></canvas>
    
	</body>
</html>