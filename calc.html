<!DOCTYPE html>
<html lang="ru" style="width: 100%;height:100%;background:rgb(34,34,36);font-family: 'Open Sans', sans-serif;">
	<head>
		<meta charset="UTF-8">
		<title>Очень точный калькулятор</title>
		<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAApISURBVFhHXVdnb1zXEd1Yoth771zuLrf33nsnd0mxU6QhWYFjS5BkO4gbYMBOrE8usAx/ib/Ff/TknLtcwMmHi7fv7X13zsycMzPP4nBvYmZxEg9HHuLBgwd47+FDTI6PYXFuDqurK5ibm8f89DSWF+awsrCA1cUVrMwvYN+6h931Ddj39+F0HsC6vQ2P1Yr97R0EfT5UaxUU8lmUUmkUCxXEEyU4Aj440g54vTbYnDvYcmzDspuxYml5BtPTk5idmcHMzBRcTifa7bZZnU6Ha3Dtdrs4Ojw0q3d0hH6/j9PHj3F6emrW+dkZzs/PcXFxgevrK7Nurq9xe3uHXq+PfZcde8F9eKNOuJ1W7O3vwbJgW8b0+CimJkYxS0+n6b3X40a/10OhUEC5XEa1WuWqoF6v/w8wAepx3/HxsVlnNH55dYUrGr158gS3d7fm+uyDD9Dmu17bPgIOG4JxF8LhA7gPHLCsrG4ypLNYXpnFxOgoJkYeweU6MAai0SiePn2KFy9eoNFo0JNbfPLJJ/j4o4/w988+w8uXL/HFF1/gzevX+Iz3b968wY8//oh3v/yCn376Cd988w1OGCG9d9lsIOF0IcbohpMeRBMB1CoVWA527LCtrRLEFObHxzHFCDiJVN5FYzG8evUKX3/9NR7zoOf0xAD4+GP88MMP+O233/DP777Dzz//jN///Tu++uorfPvtd/jjP3/g3bt3+P7tW5ycCMAdmqUO0okqQoEQQpEgcrkcarUGLL6wF5ubDkyOjWKSaRifmoLD4cAh8xxhBBqNpsmvIqDQv//++7i5uWGuL9DlHnmnZ8+fP8cThvuc+X/ByChySkWfqbm7u0Mmk0csnUAwFITP60YtFjZktWylrZjfX8WDh48wOj6BCS6310vkJyiVSoYDFYZKq1qrGh40Gc5Wq2UAKVICKy6IlOKConV6RlLeE/KvBNflXmfIhR1ywO7woOj3wed0wzKzMY/R6XH85b33MPLgEaYnprC5tYP2/xk4PX1MI0fm95FRQA9nZL2eDw2fPD7B5eUFLrgE4syAOMPV5SVKiTislJ894aL8dmDdo3xdQVj2VjcwQu0/IICpRyOYnpzEwuIite00qRhcD4wiQqEQDg4O4HK7zfNMJoMYeaJ7j8cLN6/pdArJZJL3Hurda1aCxouZOJKhMHxhF9xZHyLpCBLZGCwJ9z7maHRsdAxz9H56cgrLyyvGgLz/gMST0VwuC38gQPlEDBFFIgEQUZWW169e878wUqkUDSYMAD3X/jj3NCpVnBQp60QMoXoUqVwUXQFwbG4gvLuNuek5Gl/D2Ng0tja3KEUXWVozXLAzEjIYIIB8Po9ff/3VgBtGQPu+/9f35vcwAtp7ydDrmojHcUIO1aIkXiCCZJUVMpvCUSkFyzJrgH2JpXVxAdNTyxijCrY2Nkw1jPNFvz8Au92OXD6HYDDEA4M4Oz0z/2WzWdaKmHleKpVNGtLptIlCMDiQms/nR5IRqdHzeNIHT8IPj59KcEcI2A/LJo1tz8/Dz0gssBTPzixhfW0DgWCAL5Op96tcLhmj8kiHS05SiaIQCocQjoTNKjLM4ks0FjWFTCnSHofdhl33HtxRD9NLIAdeFMgpi90egGd9C0XmeY59QDLc3NjhQUVz0HB1qIgKy7EM6D8tVctms2mAlAhQIE2pZu8Ylm9JV5IN0usogbt8LiQiWWSSRTSKWVhWl7awu8oGsbXOKjiOh+yIi0srhtFiv7ggEg5V4HK5TQREMvHBMJ5M9/n9ZLzPpEVpUKQikYh5RxHotZroVDLIlQ9Rz5bQSmdwd3MJi5PaDAacmCcXpicmMTIygkXKUIaLxRJuWd2kCBnTYZFI1PSARDxhQAmArqqIMqq8C4C4oR4i7zM01swVkckRUCyOMtXSi0dQZWW0eNMHCHvYktnrN9fXMDc7h83VVeOhyqmajaJhIsAXhzJUiIt8JsKJ7W/fvkWavV9A5XGY3nc7XUYkhyzv6+kcIobEXhYlcsbjgodzhMXv28Xu3gqHDlbAlRUOIWvY29pmS2YR4ZKHioByLp0HGH55FWZRKdynQCAOKUuBEwBFQXuVAhFRaemyfJ+SH0f9YzRbVZ7tQZzl2OLb34KVU5FrnxPKxjqW1pZYBzaMpsMKOQ+KkdFqRjpISlChUQqkfwETAHmdzdJTFh89FwitQiHPexKyXEU2kUQiGkGmXkSS9eKSZdyyubaIVccqy+8cp6EZLCwvcLzaGhxAg8ND1AN0sJpTmawfqkDAKpWy+U/Gj44OTZEa3mtpXz5TRS5DHgS9yMWDxol64xAW146VYV/G7Pw6dmh4h7OBjVdxYFDPffeELJpwimhDlguMPFe0lGulQPvEFz0zkWKKJNMWZ8RmPY12IYs6e4M/4EeExcvSTGYRdpIcrHbhcBBO+x5CXs+g+LB8Kt9DEkoBMbL45YuXND5o0VlGSGr5/B+fGz7IWIEgEgy3WrE6pva1KcNet4VbzoklVtUwC1mmnGMzisaRixE158B8PoVys4h2t0ldc7Kt1kw43W727/sIROjlp59+isoQANOkMvzll1+ayBgA9+qQNDW8aJ9IKo5omE2mxIUoOgRvCdBrXy4En82GfJL1uphEupSHlwDUB6R9pUIANCGFyP5ms2W81cHiiNKgXCvsSov2JpNDYmZRVQQIOM13/ExpNJ+GP8pi5qIKtnetsLpsiNvYt90h7HJc9nFgTGXSJodDmbVYcnXw8NA8w6hxXSTU8xKXyCnCaRkScjVETBL4muvm4hwNlucmfx/3WnyvDott9wAxdwB1XxBe8sBmt8Ib9iB9D2AIQjX/zwDkueq+JJaj9qV/9QkZ1/M/j3KHh108blCyGYa+nkCvXcP1yRF6x31Ykm4/a3Mb58xRJ19AO1NAJcXhg7VdhJP3mmrUbGJqz6YbcrJlKlQNBUT74gZsciBVGs0IJKOUJx8E/qrbxw2BZZsE3m/g5LaPSr0KS5SfVnHKQlqOa6Ri3pMhyo0V78MPPzSzvmYAdTrlWM/FC1W6GgHI8za91r6h7g05CazC/4dKOutxRqw3kaqmUGrxY+eUqasWYUk7bfDHnSRHEDFfmPXewwM4v9OIAKjxDDQvAPSUUZDXUsMQgIw+e/bMGBwUJpKTzzWia3RXSjo8MxErcB7wwsN+EEyFWQ2TsJSjAWRSHmTYILKVFKUWZ/5rpuVKdjI4qAmMEMuv6rt4oavCLQADnqSMDAcAqpQiiUl5KgKH3Q4uDhumH3hDPk5GcdROmmgdtmCpVNjlXA5OqZQjwRTadf5xZAaJDImYyWRRoMeHDLPSlOfvPLlSLJRMt1OB0eAhMjYbdep88PGq74DOIRVB48cnfX5r1nDE39FiBsdtjvT8hmy2OxxKGXI/P7V9XhdUE27+dmvm++ZpCxUWpkqJL9JwIZlAlF7nyINYJE5gZHvtEmWlgHWjWs+jz31lAu4Q0JMeh9Y6J+QU54ZSltNPmrJsoXt8juvLU/Sv+3h6c4X/Ao5QuNSQ7PqaAAAAAElFTkSuQmCC" />
		<script type="text/javascript">
			console.log('old school from dim0n4eg');
			function SaveVal(a, b) {sessionStorage.setItem(a, b);}
			function GetVal(a, b) {return (null!=sessionStorage.getItem(a))?sessionStorage.getItem(a):b;}
			function fallbackCopyTextToClipboard(text){var textArea=document.createElement("textarea");textArea.value=text;textArea.style.top="0";textArea.style.left="0";textArea.style.position="fixed";document.body.appendChild(textArea);textArea.focus();textArea.select();try{var successful=document.execCommand('copy');var msg=successful?'удачно':'неудачно';alert('Резерв: копирование текстовой команды было '+msg);}catch(err){alert('Резерв: К сожалению, невозможно скопировать "'+text+'" err: '+err);}
			document.body.removeChild(textArea);}
			function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return;}
			navigator.clipboard.writeText(text).then(function(){alert('Скопировано '+text.length+' символов!');},function(err){alert('Не удалось скопировать текст: '+err);});}
			var arab=[1n,4n,5n,9n,10n,40n,50n,90n,100n,400n,500n,900n,1000n];var roman=['I','IV','V','IX','X','XL','L','XC','C','CD','D','CM','M'];
			function arabToRoman(number){if(!number||number>30000000n||number<=0n)return'NaN';var ret='';var i=arab.length-1;while(number>0n){if(number>=arab[i]){ret+=roman[i];number-=arab[i];}else{i--;}}return ret;}
			function romanToArab(str){str = str.toUpperCase();var ret = 0n;var i = arab.length - 1;var pos = 0;while(i>=0 && pos<str.length){if(str.substr(pos, roman[i].length)==roman[i]){ret += arab[i];pos += roman[i].length;}else{i--;}}return ret;}
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			var BPSW_trivial_limit = 20;
			var BPSW_p = Array(BPSW_trivial_limit).fill(!1);
			function BPSW_sqrt(n)
			{
				var w=(10n**100n);
				return bi_sqrt(n*w*w)/w;
			}
			
			function BPSW_gcd(a, b) {
				return a ? BPSW_gcd(b%a, a) : b;
			}

			function BPSW_powmod(a, b, m) {
				var res = 1n;
				while (b)
					if (b&1n)
						res = (res * a) % m,  --b;
					else
						a = (a * a) % m,  b >>= 1n;
				return res;
			}

			function BPSW_miller_rabin(n) {
				var b = 2n;
				for (var g; (g = BPSW_gcd (n, b)) != 1n; ++b)
					if (n > g)
						return false;
				var p=0n, q=n-1n;
				while ((q & 1n) == 0n)
					++p,  q >>= 1n;
				var rem = BPSW_powmod(b, q, n);
				if (rem == 1n || rem == n-1n)
					return true;
				for (var i=1n; i<p; ++i) {
					rem = (rem * rem) % n;
					if (rem == n-1n)  return true;
				}
				return false;
			}

			function BPSW_jacobi(a, b)
			{
				if (a == 0n)  return 0n;
				if (a == 1n)  return 1n;
				if (a < 0n)
					if ((b & 2n) == 0n)
						return BPSW_jacobi (-a, b);
					else
						return - BPSW_jacobi (-a, b);
				var a1=a,  e=0n;
				while ((a1 & 1n) == 0n)
					a1 >>= 1n,  ++e;
				var s;
				if ((e & 1n) == 0n || (b & 7n) == 1n || (b & 7n) == 7n)
					s = 1n;
				else
					s = -1n;
				if ((b & 3n) == 3n && (a1 & 3n) == 3n)
					s = -s;
				if (a1 == 1n)
					return s;
				return s * BPSW_jacobi (b % a1, a1);
			}

			function BPSW_bpsw(n) {
				if (BPSW_sqrt(n)**2n == n) return false;
				
				var dd=5n;
				for (;;) {
					var g = BPSW_gcd (n,dd>=0n?dd:-dd);
					if (1n<g && g<n)  return false;
					if (BPSW_jacobi(dd, n) == -1n)  break;
					dd = dd<0n ? -dd+2n : -dd-2n;
				}
				var p=1n,  q=(p*p-dd)/4n;
				var d=n+1n,  s=0n;
				while ((d & 1n) == 0n)
					++s,  d>>=1n;
				var u=1n, v=p, u2m=1n, v2m=p, qm=q, qm2=q*2n, qkd=q;
				for (var mask=2n; mask<=d; mask<<=1n) {
					u2m = (u2m * v2m) % n;
					v2m = (v2m * v2m) % n;
					while (v2m < qm2)   v2m += n;
					v2m -= qm2;
					qm = (qm * qm) % n;
					qm2 = qm * 2n;
					if (d & mask) {
						var t1 = (u2m * v) % n,  t2 = (v2m * u) % n,
							t3 = (v2m * v) % n,  t4 = (((u2m * u) % n) * dd) % n;
						u = t1 + t2;
						if (u & 1n)  u += n;
						u = (u >> 1n) % n;
						v = t3 + t4;
						if (v & 1n)  v += n;
						v = (v >> 1n) % n;
						qkd = (qkd * qm) % n;
					}
				}
				if (u==0n || v==0n)  return true;
				var qkd2 = qkd*2n;
				for (var r=1n; r<s; ++r) {
					v = (v * v) % n - qkd2;
					if (v < 0n)  v += n;
					if (v < 0n)  v += n;
					if (v >= n)  v -= n;
					if (v >= n)  v -= n;
					if (v == 0n)  return true;
					if (r < s-1n) {
						qkd = (qkd * qkd) % n;
						qkd2 = qkd * 2n;
					}
				}
				return false;
			}
			var BPSW_is_init=false;
			function BPSW_prime(n) { // эту функцию нужно вызывать для проверки на простоту
				
				if (!BPSW_is_init) BPSW_prime_init();
				
				for (var i=0; i<BPSW_trivial_limit && BPSW_p[i]<n; ++i)
					if (n % BPSW_p[i] == 0)
						return false;
				if (BPSW_p[BPSW_trivial_limit-1]*BPSW_p[BPSW_trivial_limit-1] >= n)
					return true;
				if (!BPSW_miller_rabin(n))
					return false;
				return BPSW_bpsw(n);
			}

			function BPSW_prime_init() { // вызвать до первого вызова prime() !
				BPSW_is_init=!0;
				for (var i=2, j=0; j<BPSW_trivial_limit; ++i) {
					var pr = true;
					for (var k=2; k*k<=i; ++k)
						if (i % k == 0)
							pr = false;
					if (pr)
						BPSW_p[j++] = BigInt(i);
				}
			}
			function next_prime(n) {
				if (n<100n)
					for (var i=2n;i<200n;i++)
						if (n<i && BPSW_prime(i))
							return i;
						
				for (var i=n/6n*6n;!0;i+=6n)
				{
					if (n<i-1n && BPSW_prime(i-1n))
						return i-1n;
					if (n<i+1n && BPSW_prime(i+1n))
						return i+1n;
				}
			}
			function last_prime(n) {
				if (n<100n)
					for (var i=200n;i>=2n;i--)
						if (i<n && BPSW_prime(i))
							return i;
						
				for (var i=(n/6n+2n)*6n;i>=2n;i-=6n)
				{
					if (i-1n<n && BPSW_prime(i-1n))
						return i-1n;
					if (i+1n<n && BPSW_prime(i+1n))
						return i+1n;
				}
				return;
			}
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			/* ===== BPSW - TEST =====  ===== BPSW - TEST =====  ===== BPSW - TEST ===== */
			
			
			
			
			var _e='2.718281828459045235360287471352662497757247093699959574966967627724076630353547594571382178525166427427466391932003059921817413596629043572900334295260595630738132328627943490763233829880753195251019011573834187930702154089149934884167509244761460668082264800168477411853742345442437107539077744992069551702761838606261331384583000752044933826560297606737113200709328709127443747047230696977209310141692836819025515108657463772111252389784425056953696770785449969967946864454905987931636889230098793127736178215424999229576351482208269895193668033182528869398496465105820939239829488793320362509443117301238197068416140397019837679320683282376464804295311802328782509819455815301756717361332069811250996181881593041690351598888519345807273866738589422879228499892086805825749279610484198444363463244968487560233624827041978623209002160990235304369941849146314093431738143640546253152096183690888707016768396424378140592714563549061303107208510383750510115747704171898610687396965521267154688957035035402123407849819334321068170121005627880235193033224745015853904730419957777093503660416997329725088687696640355570716226844716256079882651787134195124665201030592123667719432527867539855894489697096409754591856956380236370162112047742722836489613422516445078182442352948636372141740238893441247963574370263755294448337998016125492278509257782562092622648326277933386566481627725164019105900491644998289315056604725802778631864155195653244258698294695930801915298721172556347546396447910145904090586298496791287406870504895858671747985466775757320568128845920541334053922000113786300945560688166740016984205580403363795376452030402432256613527836951177883863874439662532249850654995886234281899707733276171783928034946501434558897071942586398772754710962953741521115136835062752602326484728703920764310059584116612054529703023647254929666938115137322753645098889031360205724817658511806303644281231496550704751025446501172721155519486685080036853228183152196003735625279449515828418829478761085263981395599006737648292244375287184624578036192981971399147564488262603903381441823262515097482798777996437308997038886778227138360577297882412561190717663946507063304527954661855096666185664709711344474016070462621568071748187784437143698821855967095910259686200235371858874856965220005031173439207321139080329363447972735595527734907178379342163701205005451326383544000186323991490705479778056697853358048966906295119432473099587655236812859041383241160722602998330535370876138939639177957454016137223618789365260538155841587186925538606164779834025435128439612946035291332594279490433729908573158029095863138268329147711639633709240031689458636060645845925126994655724839186564209752685082307544254599376917041977780085362730941710163434907696423722294352366125572508814779223151974778060569672538017180776360346245927877846585065605078084421152969752189087401966090665180351650179250461950136658543663271254963990854914420001457476081930221206602433009641270489439039717719518069908699860663658323227870937650226014929101151717763594460202324930028040186772391028809786660565118326004368850881715723866984224220102495055188169480322100251542649463981287367765892768816359831247788652014117411091360116499507662907794364600585194199856016264790761532103872755712699251827568798930276176114616254935649590379804583818232336861201624373656984670378585330527583333793990752166069238053369887956513728559388349989470741618155012539706464817194670834819721448889879067650379590366967249499254527903372963616265897603949857674139735944102374432970935547798262961459144293645142861715858733974679189757121195618738578364475844842355558105002561149239151889309946342841393608038309166281881150371528496705974162562823609216807515017772538740256425347087908913729172282861151591568372524163077225440633787593105982676094420326192428531701878177296023541306067213604600038966109364709514141718577701418060644363681546444005331608778314317444081194942297559931401188868331483280270655383300469329011574414756313999722170380461709289457909627166226074071874997535921275608441473782330327033016823719364800217328573493594756433412994302485023573221459784328264142168487872167336701061509424345698440187331281010794512722373788612605816566805371439612788873252737389039289050686532413806279602593038772769778379286840932536588073398845721874602100531148335132385004782716937621800490479559795929059165547050577751430817511269898518840871856402603530558373783242292418562564425502267215598027401261797192804713960068916382866527700975276706977703643926022437284184088325184877047263844037953016690546593746161932384036389313136432713768884102681121989127522305625675625470172508634976536728860596675274086862740791285657699631378975303466061666980421826772456053066077389962421834085988207186468262321508028828635974683965435885668550377313129658797581050121491620765676995065971534476347032085321560367482860837865680307306265763346977429563464371670939719306087696349532884683361303882943104080029687386911706666614680001512114344225602387447432525076938707777519329994213727721125884360871583483562696166198057252661220679754062106208064988291845439530152998209250300549825704339055357016865312052649561485724925738620691740369521353373253166634546658859728665945113644137033139367211856955395210845840724432383558606310680696492485123263269951460359603729725319836842336390463213671011619282171115028280160448805880238203198149309636959673583274202498824568494127386056649135252670604623445054922758115170931492187959271800194096886698683703730220047531433818109270803001720593553052070070607223399946399057131158709963577735902719628506114651483752620956534671329002599439766311454590268589897911583709341937044115512192011716488056694593813118384376562062784631049034629395002945834116482411496975832601180073169943739350696629571241027323913874175492307186245454322203955273529524024590380574450289224688628533654221381572213116328811205214648980518009202471939171055539011394331668151582884368760696110250517100739276238555338627255353883096067164466237092264680967125406186950214317621166814009759528149390722260111268115310838731761732323526360583817315103459573653822353499293582283685100781088463434998351840445170427018938199424341009057537625776757111809008816418331920196262341628816652137471732547772778348877436651882875215668571950637193656539038944936642176400312152787022236646363575550356557694888654950027085392361710550213114741374410613444554419210133617299628569489919336918472947858072915608851039678195942983318648075608367955149663644896559294818785178403877332624705194505041984774201418394773120281588684570729054405751060128525805659470304683634459265255213700806875200959345360731622611872817392807462309468536782310609792159936001994623799343421068781349734695924646975250624695861690917857397659519939299399556754271465491045686070209901260681870498417807917392407194599632306025470790177452751318680998228473086076653686685551646770291133682756310722334672611370549079536583453863719623585631261838715677411873852772292259474337378569553845624680101390572787101651296663676445187246565373040244368414081448873295784734849000301947788802046032466084287535184836495919508288832320652212810419044804724794929134228495197002260131043006241071797150279343326340799596053144605323048852897291765987601666781193793237245385720960758227717848336161358261289622611812945592746276713779448758675365754486140761193112595851265575973457301533364263076798544338576171533346232527057200530398828949903425956623297578248873502925916682589445689465599265845476269452878051650172067478541788798227680653665064191097343452887833862172615626958265447820567298775642632532159429441803994321700009054265076309558846589517170914760743713689331946909098190450129030709956622662030318264936573369841955577696378762491885286568660760056602560544571133728684020557441603083705231224258722343885412317948138855007568938112493538631863528708379984569261998179452336408742959118074745341955142035172618420084550917084568236820089773945584267921427347756087964427920270831215015640634134161716644806981548376449157390012121704154787259199894382536495051477137939914720521952907939613762110723849429061635760459623125350606853765142311534966568371511660422079639446662116325515772907097847315627827759878813649195125748332879377157145909106484164267830994972367442017586226940215940792448054125536043131799269673915754241929660731239376354213923061787675395871143610408940996608947141834069836299367536262154524729846421375289107988438130609555262272083751862983706678722443019579379378607210725427728907173285487437435578196651171661833088112912024520404868220007234403502544820283425418788465360259150644527165770004452109773558589762265548494162171498953238342160011406295071849042778925855274303522139683567901807640604213830730877446017084268827226117718084266433365178000217190344923426426629226145600433738386833555534345300426481847398921562708609565062934040526494324426144566592129122564889356965500915430642613425266847259491431423939884543248632746184284665598533231221046625989014171210344608427161661900125719587079321756969854401339762209674945418540711844643394699016269835160784892451405894094639526780735457970030705116368251948770118976400282764841416058720618418529718915401968825328930914966534575357142731848201638464483249903788606900807270932767312758196656394114896171683298045513972950668760474091542042842999354102582911350224169076943166857424252250902693903481485645130306992519959043638402842926741257342244776558417788617173726546208549829449894678735092958165263207225899236876845701782303809656788311228930580914057261086588484587310165815116753332767488701482916741970151255978257270740643180860142814902414678047232759768426963393577354293018673943971638861176420900406866339885684168100387238921448317607011668450388721236436704331409115573328018297798873659091665961240202177855885487617616198937079438005666336488436508914480557103976521469602766258359905198704230017946553678856';
            var _pi='3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587006606315588174881520920962829254091715364367892590360011330530548820466521384146951941511609433057270365759591953092186117381932611793105118548074462379962749567351885752724891227938183011949129833673362440656643086021394946395224737190702179860943702770539217176293176752384674818467669405132000568127145263560827785771342757789609173637178721468440901224953430146549585371050792279689258923542019956112129021960864034418159813629774771309960518707211349999998372978049951059731732816096318595024459455346908302642522308253344685035261931188171010003137838752886587533208381420617177669147303598253490428755468731159562863882353787593751957781857780532171226806613001927876611195909216420198938095257201065485863278865936153381827968230301952035301852968995773622599413891249721775283479131515574857242454150695950829533116861727855889075098381754637464939319255060400927701671139009848824012858361603563707660104710181942955596198946767837449448255379774726847104047534646208046684259069491293313677028989152104752162056966024058038150193511253382430035587640247496473263914199272604269922796782354781636009341721641219924586315030286182974555706749838505494588586926995690927210797509302955321165344987202755960236480665499119881834797753566369807426542527862551818417574672890977772793800081647060016145249192173217214772350141441973568548161361157352552133475741849468438523323907394143334547762416862518983569485562099219222184272550254256887671790494601653466804988627232791786085784383827967976681454100953883786360950680064225125205117392984896084128488626945604241965285022210661186306744278622039194945047123713786960956364371917287467764657573962413890865832645995813390478027590099465764078951269468398352595709825822620522489407726719478268482601476990902640136394437455305068203496252451749399651431429809190659250937221696461515709858387410597885959772975498930161753928468138268683868942774155991855925245953959431049972524680845987273644695848653836736222626099124608051243884390451244136549762780797715691435997700129616089441694868555848406353422072225828488648158456028506016842739452267467678895252138522549954666727823986456596116354886230577456498035593634568174324112515076069479451096596094025228879710893145669136867228748940560101503308617928680920874760917824938589009714909675985261365549781893129784821682998948722658804857564014270477555132379641451523746234364542858444795265867821051141354735739523113427166102135969536231442952484937187110145765403590279934403742007310578539062198387447808478489683321445713868751943506430218453191048481005370614680674919278191197939952061419663428754440643745123718192179998391015919561814675142691239748940907186494231961567945208095146550225231603881930142093762137855956638937787083039069792077346722182562599661501421503068038447734549202605414665925201497442850732518666002132434088190710486331734649651453905796268561005508106658796998163574736384052571459102897064140110971206280439039759515677157700420337869936007230558763176359421873125147120532928191826186125867321579198414848829164470609575270695722091756711672291098169091528017350671274858322287183520935396572512108357915136988209144421006751033467110314126711136990865851639831501970165151168517143765761835155650884909989859982387345528331635507647918535893226185489632132933089857064204675259070915481416549859461637180270981994309924488957571282890592323326097299712084433573265489382391193259746366730583604142813883032038249037589852437441702913276561809377344403070746921120191302033038019762110110044929321516084244485963766983895228684783123552658213144957685726243344189303968642624341077322697802807318915441101044682325271620105265227211166039666557309254711055785376346682065310989652691862056476931257058635662018558100729360659876486117910453348850346113657686753249441668039626579787718556084552965412665408530614344431858676975145661406800700237877659134401712749470420562230538994561314071127000407854733269939081454664645880797270826683063432858785698305235808933065757406795457163775254202114955761581400250126228594130216471550979259230990796547376125517656751357517829666454779174501129961489030463994713296210734043751895735961458901938971311179042978285647503203198691514028708085990480109412147221317947647772622414254854540332157185306142288137585043063321751829798662237172159160771669254748738986654949450114654062843366393790039769265672146385306736096571209180763832716641627488880078692560290228472104031721186082041900042296617119637792133757511495950156604963186294726547364252308177036751590673502350728354056704038674351362222477158915049530984448933309634087807693259939780541934144737744184263129860809988868741326047215695162396586457302163159819319516735381297416772947867242292465436680098067692823828068996400482435403701416314965897940924323789690706977942236250822168895738379862300159377647165122893578601588161755782973523344604281512627203734314653197777416031990665541876397929334419521541341899485444734567383162499341913181480927777103863877343177207545654532207770921201905166096280490926360197598828161332316663652861932668633606273567630354477628035045077723554710585954870279081435624014517180624643626794561275318134078330336254232783944975382437205835311477119926063813346776879695970309833913077109870408591337464144282277263465947047458784778720192771528073176790770715721344473060570073349243693113835049316312840425121925651798069411352801314701304781643788518529092854520116583934196562134914341595625865865570552690496520985803385072242648293972858478316305777756068887644624824685792603953527734803048029005876075825104747091643961362676044925627420420832085661190625454337213153595845068772460290161876679524061634252257719542916299193064553779914037340432875262888963995879475729174642635745525407909145135711136941091193932519107602082520261879853188770584297259167781314969900901921169717372784768472686084900337702424291651300500516832336435038951702989392233451722013812806965011784408745196012122859937162313017114448464090389064495444006198690754851602632750529834918740786680881833851022833450850486082503930213321971551843063545500766828294930413776552793975175461395398468339363830474611996653858153842056853386218672523340283087112328278921250771262946322956398989893582116745627010218356462201349671518819097303811980049734072396103685406643193950979019069963955245300545058068550195673022921913933918568034490398205955100226353536192041994745538593810234395544959778377902374216172711172364343543947822181852862408514006660443325888569867054315470696574745855033232334210730154594051655379068662733379958511562578432298827372319898757141595781119635833005940873068121602876496286744604774649159950549737425626901049037781986835938146574126804925648798556145372347867330390468838343634655379498641927056387293174872332083760112302991136793862708943879936201629515413371424892830722012690147546684765357616477379467520049075715552781965362132392640616013635815590742202020318727760527721900556148425551879253034351398442532234157623361064250639049750086562710953591946589751413103482276930624743536325691607815478181152843667957061108615331504452127473924544945423682886061340841486377670096120715124914043027253860764823634143346235189757664521641376796903149501910857598442391986291642193994907236234646844117394032659184044378051333894525742399508296591228508555821572503107125701266830240292952522011872676756220415420516184163484756516999811614101002996078386909291603028840026910414079288621507842451670908700069928212066041837180653556725253256753286129104248776182582976515795984703562226293486003415872298053498965022629174878820273420922224533985626476691490556284250391275771028402799806636582548892648802545661017296702664076559042909945681506526530537182941270336931378517860904070866711496558343434769338578171138645587367812301458768712660348913909562009939361031029161615288138437909904231747336394804575931493140529763475748119356709110137751721008031559024853090669203767192203322909433467685142214477379393751703443661991040337511173547191855046449026365512816228824462575916333039107225383742182140883508657391771509682887478265699599574490661758344137522397096834080053559849175417381883999446974867626551658276584835884531427756879002909517028352971634456212964043523117600665101241200659755851276178583829204197484423608007193045761893234922927965019875187212726750798125547095890455635792122103334669749923563025494780249011419521238281530911407907386025152274299581807247162591668545133312394804947079119153267343028244186041426363954800044800267049624820179289647669758318327131425170296923488962766844032326092752496035799646925650493681836090032380929345958897069536534940603402166544375589004563288225054525564056448246515187547119621844396582533754388569094113031509526179378002974120766514793942590298969594699556576121865619673378623625612521632086286922210327488921865436480229678070576561514463204692790682120738837781423356282360896320806822246801224826117718589638140918390367367222088832151375560037279839400415297002878307667094447456013455641725437090697939612257142989467154357846878861444581231459357198492252847160504922124247014121478057345510500801908699603302763478708108175450119307141223390866393833952942578690507643100638351983438934159613185434754649556978103829309716465143840700707360411237359984345225161050702705623526601276484830840761183013052793205427462865403603674532865105706587488225698157936789766974220575059683440869735020141020672358502007245225632651341055924019027421624843914035998953539459094407046912091409387001264560016237428802109276457931065792295524988727584610126483699989225695968815920560010165525637567856';
			
			var cl_width=1000;
			var deb=0;
			function cl_str2numbase(n,base)
			{
				if (n=='')return;
				var basenums=[];//[0n,1n,2n,3n,4n,5n,6n,7n,8n,9n,10n,11n,12n,13n,14n,15n];
				var basestrings=['0','1','2','3','4','5','6','7','8','9','a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
				
				for (var i=0;i<basestrings.length;i++)basenums[i]=BigInt(i);
				var v = (10n**BigInt(cl_width))/base;
				
				if (base==1)
				{
					if (!(/^[1]*[.]?[1]*$/.test(n)))return;
					var v2=n.split('.')[0].length;
					if (n.indexOf('.1')+1)
					{
						var v3=n.split('.')[1].length.toString(2).toString(2).split('').reverse().join('');
						//console.log(v3);
						return BigInt(v2)*v+cl_str2numbase('.'+v3,2n);
					}else
						return BigInt(v2)*v;
				}
				var res = 0n;
				if (n.indexOf('.')>=0)
				{
					var n2=n.split('.')[1];
					for (var i=0;i<n2.length;i++)
					{
						res+=basenums[basestrings.indexOf(n2[i])]*v;
						v/=base;
					}
				}
				v=(10n**BigInt(cl_width));
				n=n.split('.')[0].split('').reverse().join('');
				for (var i=0;i<n.length;i++)
				{
					res+=basenums[basestrings.indexOf(n[i])]*v;
					if (basestrings.indexOf(n[i])>=base)
						return;
					v*=base;
				}
				return res; 
				
			}
			function arr2cooljoin(s,nb)
			{
				var wid=((nb-1n)+'').length;
				return s.map((x)=>{return '0'.repeat(wid-(x+'').length)+x}).join(' ')
				
			}
			
			function cl_str2num(n)
			{
				if(deb)console.log('cl_str2num('+n+')');
				if (n=='')
					return;
				
				if (/^[0][r][IVXLCDM]+/.test(n))
				{
					return romanToArab(n.split('r')[1]) * 10n**BigInt(cl_width);
				}
				else
				if (/^[0123456789]*[.]?[0123456789]*$/.test(n)) {
					var z=0;
					if (n.indexOf('.')>=0)
					{
						z=n.split('.')[1].length;
						n=n.replace('.','');
					}
					return BigInt(n) * (10n**BigInt(cl_width)) / (10n**BigInt(z));
				}else if (/^0b[01]*[.]?[01]*$/.test(n)) {
					
					n=n.split('0b')[1];
					return cl_str2numbase(n,2n);
				}else if (/^0o[01234567]*[.]?[01234567]*$/.test(n)) {
					n=n.split('0o')[1];
					return cl_str2numbase(n,8n);
				}else if (/^0x[0123456789abcdef]*[.]?[0123456789abcdef]*$/.test(n)) {
					n=n.split('0x')[1];
					return cl_str2numbase(n,16n);
				}else if (/^[0123456789]+b[0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ]*[.]?[0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ]*$/.test(n)) {
					var __base=BigInt(n.split('b')[0]);
					if (__base>=1n && __base<=62n)
					{
						n=n.split('b').slice(1).join('b');
						return cl_str2numbase(n,__base);
					}
					return;
				}else if (/^[0123456789]+[.]?[0123456789]*[e][+-]?[0123456789]+/.test(n) || /^[.][0123456789]+[e][+-]?[0123456789]+/.test(n))
				{
					var v=n.split('e')[1];
					var s='';
					if (v[0]=='-'){
						s=v.slice(1);v=-1n; 
					}else if (v[0]=='+'){
						s=v.slice(1);v=1n; 
					}else{s=v;v=1n}
					if (v>0n)
						return cl_str2num(n.split('e')[0])*10n**(cl_str2num(s)/cl_str2num('1'));
					else
						return cl_str2num(n.split('e')[0])/10n**(cl_str2num(s)/cl_str2num('1'));
				}else if (n.split('@').length==2)
				{
					var __base=BigInt(n.split('@')[0]);
					var v=n.split('@')[1];//.replace(/ {1,}/g," ");
					var vnum=[];
					var vfl=[];
					var val=0n;
					if (v.indexOf(';')+1)
					{
						vfl=v.split(';')[1].trim().replace(/ {1,}/g," ").split(' ').map((x)=>{return BigInt(x)});
						var wid=10n**BigInt(cl_width);
						for (var i=0;i<vfl.length;i++)
						{
							wid/=__base;
							if (vfl[i]>=__base)return;
							val+=vfl[i]*wid;
						}
					}
					vnum=v.split(';')[0].trim().replace(/ {1,}/g," ").split(' ').map((x)=>{return BigInt(x)});
					var wid=10n**BigInt(cl_width);
					for (var i=vnum.length-1;i>=0;i--)
					{
						if (vnum[i]>=__base)return;
						val+=vnum[i]*wid;
						wid*=__base;
					}
					console.log(vnum,vfl);
					return val;//cl_str2num(n.split('e')[0])/10n**(cl_str2num(s)/cl_str2num('1'));
				}else
					return;
			}
			var __rounding_width=20;
			function cl_num2str(n,style_out)
			{
				if(deb)console.log('cl_str2num('+style_out+')');
				var __rounding=10n**BigInt(__rounding_width);
				if (style_out==undefined) style_out=0;
				if (style_out==0)
				{
					if (rounding.checked) n = ((n % __rounding >= __rounding/2n)?n/__rounding+1n:n/__rounding)*__rounding;
					if (n>=0)
					{
						if ((n % (10n**BigInt(cl_width)))==0n)
							return ''+(n / (10n**BigInt(cl_width)));
						return ''+(n / (10n**BigInt(cl_width)))+('.'+((10n**BigInt(cl_width))+(n % (10n**BigInt(cl_width))))).replace(/[0]*$/gi,'').replace('1','');
					}
					else
					{
						return '-'+cl_num2str(-n,style_out);
					}
				}else
				if (style_out==1||style_out==3)
				{
					if (n+__rounding/4n>=0)
					{
						var basestrings=['0','1','2','3','4','5','6','7','8','9','a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
						var nb=BigInt(needbase.value);
						//var nb2=BigInt(needbase.value);
						if (nb<2n)
						{
							if (rounding.checked) n+=__rounding/nb/4n
							var n2=(n / (10n**BigInt(cl_width)));
							if (style_out==3)
							{
								if (n2>500000n) return 'NaN';
							}else
								if (n2>10000n) return 'NaN';
							var s='';
							for (var i=0n;i<n2;i++) s+='1';
							n2=n % (10n**BigInt(cl_width));
							var n3=0n;
							var iter=0n;
							var __one=cl_str2num('1');
							var cl_width2base=13n;
							if (style_out==3) cl_width2base=15n;
							while (n2>=0n)
							{
								n2*=2n;
								if (n2>=__one)
									n3+=2n**cl_width2base;
								n3=n3/2n;
								n2=n2%__one;
								if (iter++>cl_width2base-2n)break;
							}
							if (n3!=0n)
							{
								s+='.';
								for (var i=0n;i<n3;i++) s+='1';
							}
							if (s=='')
								return '1b.'
							return '1b'+s
						}
						var flv=[];
						var numv=[];
						//debugger;
						var s='';
						var n2=(n / (10n**BigInt(cl_width)));
						while (n2>0n)
						{
							numv.push(n2%nb);
							if (nb<=62n)
								s=basestrings[n2%nb]+s;
							n2=n2/nb;
						}
						if (s=='') s='0';
						if (numv.length==0) numv=[0];
						if ((n % (10n**BigInt(cl_width)))==0n)
						{
							if (nb>62n)
								return nb+'@'+arr2cooljoin(numv.reverse(),nb);
							else
								return ((nb==2n)?'0b':(nb==8n)?'0o':(nb==16n)?'0x':nb+'b')+s+'\n'+nb+'@'+arr2cooljoin(numv.reverse(),nb);
						}
						else
						{
							var s2='';
							n2=(n % (10n**BigInt(cl_width)));
							var iter=0;
							var __one=cl_str2num('1');
							var cl_width2base=100;
							if (style_out==3) cl_width2base=Math.ceil(cl_width/Math.log10(needbase.value-0));
							if (cl_width2base**2>1000000000)
								if (!confirm('Вы уверены? Вычисления могут занять много времени'))
									return '';
							if (rounding.checked) n2+=__rounding/nb/4n;
							while (n2>=__rounding)
							{
								__one=__one/nb;
								flv.push(n2/__one);
								if (nb<=62n)
									s2=s2+basestrings[n2/__one];
								n2=n2%__one;
								iter++;
								if (iter>cl_width2base)
									break;
							}
							if (nb>62n)
							{
								if (BigInt(flv.join(''))==0n) return nb+'@'+arr2cooljoin(numv.reverse(),nb);
								if (n2>=__rounding && style_out!=3) return nb+'@'+arr2cooljoin(numv.reverse(),nb)+';'+arr2cooljoin(flv,nb)+'.....';
								return nb+'@'+arr2cooljoin(numv.reverse(),nb)+';'+arr2cooljoin(flv,nb);
							}
							if (s2=='') return ((nb==2n)?'0b':(nb==8n)?'0o':(nb==16n)?'0x':nb+'b')+s+'\n'+nb+'@'+arr2cooljoin(numv.reverse(),nb);
							if (n2>=__rounding && style_out!=3) return ((nb==2n)?'0b':(nb==8n)?'0o':(nb==16n)?'0x':nb+'b')+s+'.'+s2+'.....'+'\n'+nb+'@'+arr2cooljoin(numv.reverse(),nb)+';'+arr2cooljoin(flv,nb)+'.....';
							return ((nb==2n)?'0b':(nb==8n)?'0o':(nb==16n)?'0x':nb+'b')+s+'.'+s2+'\n'+nb+'@'+arr2cooljoin(numv.reverse(),nb)+';'+arr2cooljoin(flv,nb);
						}
					}
					else
					{
						return '-'+cl_num2str(-n,style_out);
					}
				}else
				if (style_out==2)
				{
					if (rounding.checked) n = ((n % __rounding >= __rounding/2n)?n/__rounding+1n:n/__rounding)*__rounding;
					if (n==0)
					{
						return '0e+0';
					}else
					if (n>=0)
					{
						var z=(''+n).length;
						var tmp='';
						if ((n % (10n**BigInt(z-1)))!=0n)
							tmp=('.'+((10n**BigInt(z-1))+(n % (10n**BigInt(z-1))))).replace(/[0]*$/gi,'').replace('1','');
						return (n / (10n**BigInt(z-1)))+tmp+'e'+(z-cl_width-1>=0?'+':'')+(z-cl_width-1);
					}
					else
					{
						return '-'+cl_num2str(-n,style_out);
					}
				}else
				if (style_out==4)
				{
					if (rounding.checked) if (n>=0) n+=__rounding/4n; else n-=__rounding/4n;
					if ((n<0n?-n:n)%(10n**BigInt(cl_width))>__rounding) return 'NaN';
					n=n/(10n**BigInt(cl_width));
					if (n==0)
					{
						return 'NaN';
					}else
					{
						var v=arabToRoman(n>=0n?n:-n);
						if (v!='NaN')
							return (n<0n?'-':'')+'0r'+v;
						else
							return 'NaN';
					}
				}else if (style_out==5||style_out==6||style_out==7||style_out==8)
				{
					
					var __one = (10n**BigInt(cl_width));
					var a=n/__one;
					var q = n-a*__one;
					if (q<0n)
					{
						a-=1n;
						q = n-a*__one;
					}
					var t = __one;
					var res = [a];
					var res2 = [n>=0?cl_round(n)/__one:-cl_round(-n)/__one];
					if (!rounding.checked)__rounding=0n;
					var iter=style_out!=6?0:2000;
					while (cl_abs(q)>__rounding)
					{
						var next_t = q;
						a=t/q;
						q = t%q;
						t = next_t;
						res.push(a);
						iter++;
						if(iter==101)break;
						if(iter<101 && style_out>=7)
						{
							var _a=res[iter];
							var _b=1n;
							for (var i=iter-1;i>=0;i--)
							{
								_a=_a^_b;
								_b=_a^_b;
								_a=_a^_b;
								_a=_a+_b*res[i];
								_b=_b;
							}
							res2.push(_a+'/'+_b);
						}
					}
					if (style_out<=6)
						if (res.length>1)
							return '['+res[0]+'; '+res.slice(1).join(', ')+']';
						else
							return '['+res[0]+']';
					else
						return '['+res2.join(', ')+']';
					
				}
			
			}
			function cl_sum(a,b) // +
			{
				if(deb)console.log('cl_sum('+cl_num2str(a,0)+','+cl_num2str(b,0)+')');
				return a+b;
			}
			function cl_sub(a,b) // -
			{
				if(deb)console.log('cl_sub('+cl_num2str(a,0)+','+cl_num2str(b,0)+')');
				return a-b;
			}
			function cl_mult(a,b) // *
			{
				if(deb)console.log('cl_mult('+cl_num2str(a,0)+','+cl_num2str(b,0)+')');
				return (a*b)/(10n**BigInt(cl_width));
			}
			function cl_div(a,b) // /
			{
				if(deb)console.log('cl_div('+cl_num2str(a,0)+','+cl_num2str(b,0)+')');
				if (b==0n)
					return;
				return (a*(10n**BigInt(cl_width)))/b;
			}
			function cl_pow(a,b) // **
			{
				if(deb)console.log('cl_pow('+cl_num2str(a,0)+','+cl_num2str(b,0)+')');
				if (b==0n)
					return cl_str2num('1');
				if (b<0n)
					return cl_div(cl_str2num('1'),cl_pow(a,-b));
				if (b%(10n**BigInt(cl_width))!=0n)
					if (a<0n)
						return;
					else
						return cl_exp(cl_mult(b,cl_ln(a)));
				
				b=b/(10n**BigInt(cl_width));
				if (b==0n) return cl_str2num('1');
				
				
				if (a%(10n**BigInt(cl_width))==0n)
					return ((a/(10n**BigInt(cl_width)))**b)*(10n**BigInt(cl_width));
				else
				{
					var res=(10n**BigInt(cl_width));
					while (b)
					{
						if (b&1n) {
							res*= a;
							res/=(10n**BigInt(cl_width));
							--b;
						}
						else {
							a*= a;
							a/=(10n**BigInt(cl_width));
							b=b>>1n;
						}
					}
					return res;
					//return (a**b)/(10n**BigInt(cl_width))**(b-1n);
					
				}
			}
			function cl_exp(a) // exp
			{
				var n=1n;
				var i=2n;
				var __one=cl_str2num('1');
				if (a<0n) return cl_div(__one,cl_exp(-a))
				if (a==0n) return __one;
				var _more_fast=5n;
				if (a<1n*__one)
					_more_fast=10000n;
				if (a<10n*__one)
					_more_fast=1000n;
				if (a<100n*__one)
					_more_fast=1000n;
				if (a>__one/_more_fast)
				{
					return cl_exp(a%(__one/_more_fast)) /*0..1/_more_fast*/ * cl_pow(cl_exp(__one/_more_fast),a/(__one/_more_fast)*__one)  /__one;
					
				}
				var res=__one;
				var a_cop=a;
				while (1)
				{
					var v=a/n;
					if (v>=0 && v<=1n)
						break;
					if (v<=0 && v>=-1n)
						break;
					res+=v;
					a=(a*a_cop)/__one;
					n=n*i;
					i+=1n;
				}
				return res;
			}
			function cl_log2(a) // log2
			{
				var __one=cl_str2num('1');
				if (a<=0n)return;
				if (a<__one)return -cl_log2(cl_div(__one,a));
				if (a>=2n*__one)
				{
					var n=1n;
					while (a>=2n*__one)
					{
						__one*=2n;
						n+=1n;
					}
					n-=1n
					if(deb)console.log(n);
					n*=cl_str2num('1');
					var v=cl_log2(cl_mult(cl_div(cl_str2num('1'),__one),a));
					if (v==undefined) return;
					return n+v;
					//cl_log2(2n**n)
				}
				if (a==__one)return 0n;
				// a= (1, 0.02]
				/*if (a<=__one*51n/50n)
				{
					var res=0n;
					a-=__one;
					var a_cop=a;
					var i=1n;
					while (0)
					{
						var v=a_cop/i+__one/i;
						if (v>=0 && v<=100n)
							break;
						if (v<=0 && v>=-100n)
							break;
						res+=v;
						a_cop=(a_cop*a)/__one;
						i+=i>0n?1n:-1n;
						i=-i;
					}
					return res;
				}*/
				
				
				// a = (0.02, 2)
				if(deb)console.log('in',cl_num2str(a));
				var res=0n;
				var _two2=cl_str2num('1');
				var _two=cl_str2num('2');
				while (1)
				{
					if (a==__one) break;
					while (a<_two)
					{
						a*=a;
						a/=__one;
						_two2=_two2>>1n;
						if (_two2<=2n) break;
					}
					a=a>>1n;
					//if (a<=__one*51n/50n) return res+_two2*(__one+cl_log2(a));
					res+=_two2;
					//console.log('---',cl_num2str(a));
					if (_two2<=2n || a>=_two) break;
				}
				if(deb)console.log(cl_num2str(res));
				return res;
			}
			function cl_trunc(a)
			{
				var __one=cl_str2num('1');
				return a/__one*__one;
			}
			function cl_floor(a)
			{
				var __one=cl_str2num('1');
				return a>=0n?cl_trunc(a):cl_trunc(a-__one+10n**BigInt(Math.floor(__rounding_width/2)));
			}
			function cl_round(a)
			{
				var __one=cl_str2num('1');
				return a>=0n?cl_trunc(a+__one/2n):cl_floor(a+__one/2n);
			}
			function cl_ceil(a)
			{
				var __one=cl_str2num('1');
				return a>=0n?-cl_floor(-a):cl_trunc(a+__one/2n);
			}
			function cl_logb(a,base) // log
			{
				if (base==cl_str2num('1')) return;
				if (base<=0n) return;
				if (a<=0n) return;
				return cl_div(cl_ln(a),cl_ln(base))
			}
			function cl_ln(a) // ln
			{
				//console.log('st');
				var __one=cl_str2num('1');
				if (a<=0n) return;
				//return cl_div(cl_log2(a),cl_log2(cl_getConst('e')));
				
				if (a>__one) return -cl_ln(cl_div(__one,a));
				if (a==__one) return 0n;
				
				// (0..1)
				if (a<__one/10000000000n*9999999999n)
				{
					//console.log('sqrt');
					var v=cl_ln(cl_sqrt(a))*2n;
					//console.log('sqrt2');
					return v;
				}
				//console.log('q');
				
				var res=0n;
				a=__one-a;
				//console.log('q',cl_num2str(a));
				var a_cop=a;
				var i=1n;
				while (1)
				{
					var v=-a_cop/i;
					if (v>=0 && v<=1n)
						break;
					if (v<=0 && v>=-1n)
						break;
					res+=v;
					a_cop=(a_cop*a)/__one;
					i+=1n;
				}
				if(deb)console.log(i);
				return res;//cl_div(cl_log2(a),cl_log2(cl_getConst('e')))
			}
			
			function cl_sqrt(a) // sqrt
			{
				if (a<0n)
					return;
				var __one=(10n**BigInt(cl_width));
				return bi_sqrt(a*__one)*bi_sqrt(__one**2n)/__one;
			}
			function cl_sqrtb(a,b) // sqrt
			{
				if (a<0n)
					return;
				return cl_pow(a,cl_div(cl_str2num('1'),b));
			}
			
			function cl_getConst(st)
			{
				if (st=='pi')
					return cl_str2num(_pi);
				else if (st=='eps')
					return 1n;
				else if (st=='f')
					return cl_div(cl_sum(cl_sqrt(cl_str2num('5')),cl_str2num('1')),cl_str2num('2'));
				else
					return cl_str2num(_e);
			    return -1;
			}
			function bi_sqrt(a)
			{
				var div = 1n<<BigInt((a.toString(2)).length>>1);
				//var __one = cl_str2num('1');
				var rslt = a;
				 if (a <= 0n)
					return 0n;
				while (1)
				{
					div = (a/div+div)>>1n;
					if (rslt>div)rslt=div;else return rslt;
				}
			}
			function cl_max(a)
			{
				var max=a[0];
				for (var i=1;i<a.length;i++)
					if (a[i]>max)
						max=a[i]
				return max;
			}
			function cl_min(a)
			{
				var min=a[0];
				for (var i=1;i<a.length;i++)
					if (a[i]<min)
						min=a[i]
				return min;
			}
			function cl_abs(a){return a>=0n?a:-a}
			function cl_sign(a){return a>0n?cl_str2num('1'):(a<0n?-cl_str2num('1'):0n)}
			function cl_mod(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a%b)*w;}
			function cl_idiv(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a/b)*w;}
			function cl_shr(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a>>b)*w;}
			function cl_shl(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a<<b)*w;}
			function cl_and(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a&b)*w;}
			function cl_xor(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a^b)*w;}
			function cl_or(a,b){var w=cl_str2num('1');a=cl_round(a)/w;b=cl_round(b)/w; return (a|b)*w;}
			function gammaapprox(x,w)
			{
				var p=[-cl_str2num('1.71618513886549492533811'),
						cl_str2num('24.7656508055759199108314'),
					   -cl_str2num('379.804256470945635097577'),
						cl_str2num('629.331155312818442661052'),
						cl_str2num('866.966202790413211295064'),
					   -cl_str2num('31451.2729688483675254357'),
					   -cl_str2num('36144.4134186911729807069'),
						cl_str2num('66456.1438202405440627855')];

				var q=[-cl_str2num('30.8402300119738975254353'),
						cl_str2num('315.350626979604161529144'),
					   -cl_str2num('1015.15636749021914166146'),
					   -cl_str2num('3107.77167157231109440444'),
						cl_str2num('22538.1184209801510330112'),
						cl_str2num('4755.84627752788110767815'),
					   -cl_str2num('134659.959864969306392456'),
					   -cl_str2num('115132.259675553483497211')];
				var z = x - w;
				var a = 0n;
				var b = w;
				for(var i = 0; i < 8; i++)
				{ 
					a = (a + p[i]) * z / w;
					b = b * z / w + q[i];
				}
				return cl_div(a,b) + w;
			}
			function gamma(z,w)
			{
				if(z==0n)
					return;
				if(z==w)
					return w;
				if(z==2n*w)
					return w;
				if((z>0n)&&(z<w))// рекурентное соотношение для 0
				{		
					var v=gamma(z+w,w);
					if (v==undefined) return;
					return cl_div(v,z);   
				}
				  
				if(z>2n*w)// рекурентное соотношение для z>2
				{
					//	return (z-w)*gamma(z-w,w)/w; 
					var v=w;
					var mz=0n;
					for (var i=z-w;i>w;i-=w)
					{
						mz++;
						v*=i;
						v/=w;
					}	
					var v2=gamma(z-w*mz,w);
					if (v2==undefined) return;
					return v*v2/w; 
				}
				  
				if(z<=0n)// рекурентное соотношение для z<=0
				{
					var v=cl_nnf('sin',[cl_getConst('pi')*z/w]);
					if (v==undefined) return;
					return cl_div(cl_getConst('pi'),(v*gamma(w-z,w))/w);
				}
				return gammaapprox(z,w); // 1<=z<=2 использовать аппроксимацию
			}
			function cl_eval(a)
			{
				var __cl=parseFormula(a);
				if (__cl==undefined)
					return NaN
				else
					return __cl[1][0];
			}
			function cl_nnf(f,a)
			{
				if (Math[f]==undefined)
					return;
				var arg=[];
				for (var i=0;i<a.length;i++)arg.push(parseFloat(a[i]*(2n**50n)/(10n**BigInt(cl_width))+'')/(2**50));
				var v=Math[f].apply(null,arg)
				if (typeof v!='number' || isNaN(v) || v==Infinity || v==-Infinity)
					return;
				else
					return BigInt(Math.floor(v*(2**50)))*10n**BigInt(cl_width)/(2n**50n);
			}
			var nfobg={};
			function cl_nf(name,a)
			{
				if (nfobg[name]==undefined) return;
				var w=10n**BigInt(cl_width);
				return nfobg[name](a,w);
			}
			function cl_add_function(name,f){nfobg[name]=f}
			
			cl_add_function('fact',(a,w)=>{if (a.length!=1) return;return gamma(a[0]+w,w);});
			cl_add_function('gcd',function cl_gcd(a,w){
				if (a.length<2)return;
				if (a.length>2)return a.reduce((x,y)=>{return cl_gcd([x,y],w)});
				var b=cl_abs(a[1]);//cl_round(a[1])/w;
				a=cl_abs(a[0]);//cl_round(a[0])/w;
				while(b){a%=b;a=a^b;b=a^b;a=a^b;}
				return a;//*w;
			});
			cl_add_function('lcm',function cl_lcm(a,w){
				if (a.length<2)return;
				if (a.length>2)return a.reduce((x,y)=>{return cl_lcm([x,y],w)});
				return cl_abs(a[0])/cl_nf('gcd',a)*cl_abs(a[1]);
			});
			cl_add_function('fib',(a,w)=>{
				if (a.length!=1) return;
				var n=cl_round(a[0])/w;
				if (n<0n) return;
				var a = 1n, ta,
					b = 1n, tb,
					c = 1n, rc = 0n, tc,
					d = 0n, rd = 1n;
				while (n)
				{
					if (n&1n)
					{
						tc = rc;
						rc = rc*a + rd*c;
						rd = tc*b + rd*d;
					} 
					ta = a; tb = b; tc = c;
					a = a*a  + b*c;
					b = ta*b + b*d;
					c = c*ta + d*c;
					d = tc*tb+ d*d;
					n=n>>1n;
				}
				return rc*w;
			});
			cl_add_function('isprime',(a,w)=>{
				if (a.length!=1) return;
				var n=cl_round(a[0])/w;
				return BPSW_prime(n)?w:0n;
			});
			cl_add_function('nextprime',(a,w)=>{
				if (a.length!=1) return;
				var n=cl_trunc(a[0])/w;
				return next_prime(n)*w;
			});
			cl_add_function('lastprime',(a,w)=>{
				if (a.length!=1) return;
				var n=cl_ceil(a[0])/w;
				var v=last_prime(n);
				if (v==undefined)return
				return v*w;
			});
			var persing_log='';
			function parseFormula(a) {
				//console.log(a);
				a = '(' + a + ')';
				a=a.replace(/([\(,\*%\/<>&^|])[ ]*[-]/gi,'$1~~');
				var token,
				outFormula,
				stack,
				operators;
				operators = ['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<', '&', '^', '|'];
				ParseOperators = [
					[], // ~~(-)
					['~~', '!'], // !
					['~~', '!', '**'], // **
					['~~', '!', '**', '%', '//', '/', '*'], // %
					['~~', '!', '**', '%', '//', '/', '*'], // //
					['~~', '!', '**', '%', '//', '/', '*'], // /
					['~~', '!', '**', '%', '//', '/', '*'], // *
					['~~', '!', '**', '%', '//', '/', '*', '-', '+'], // -
					['~~', '!', '**', '%', '//', '/', '*', '-', '+'], // +
					['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<'], // >>
					['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<'], // <<
					['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<', '&'], // &
					['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<', '&', '^'], // ^
					['~~', '!', '**', '%', '//', '/', '*', '-', '+', '>>', '<<', '&', '^', '|'], // |
				];
				var operator2function={
					'%':['cl_mod',cl_mod],
					'//':['cl_idiv',cl_idiv],
					'>>':['cl_shr',cl_shr],
					'<<':['cl_shl',cl_shl],
					'&':['cl_and',cl_and],
					'^':['cl_xor',cl_xor],
					'|':['cl_or',cl_or],
				};
				
				//operators = ['**', '*', '/', '+', '-'];
				//ParseOperators = [['**'], ['**', '*', '/'], ['**', '*', '/'], ['**', '*', '/', '+', '-'], ['**', '*', '/', '+', '-']];
				outFormula = [];
				stack = [];
				function NameToNameVal(str) {
					var str2 = str.trim().replace(new RegExp('  ', 'gi'), ' ');
					while (str2 != str2.replace(new RegExp('  ', 'gi'), ' '))
						str2 = str2.replace(new RegExp('  ', 'gi'), ' ');
					str2 = str2.replace(new RegExp(' ', 'gi'), '_');
					return str2;
				}
				function ItisName(s) {
					var dop = false,
					i = 0;
					s = s.trim();
					for (i = 0; i < s.length; i++) {
						dop = true;
						if ((s[i] >= 'а') && (s[i] <= 'я'))
							dop = false;
						if ((s[i] >= 'А') && (s[i] <= 'Я'))
							dop = false;
						if ((s[i] >= 'a') && (s[i] <= 'z'))
							dop = false;
						if ((s[i] >= 'A') && (s[i] <= 'Z'))
							dop = false;
						if ((i > 0) && (s[i] >= '0') && (s[i] <= '9'))
							dop = false;
						if (s[i] == ' ')
							dop = false;
						if (s[i] == '_')
							dop = false;
						if (dop == true)
							return false;
					}
					if (s.length == 0)
						return false;
					return true;
				}
				//operators.indexOf(token[0]) != -1
				function readtoken(b) {
					b = b.trim();
					if (b == '')
						return [-1, -1];
					if (b.length > 1 && operators.indexOf(b[0] + b[1]) != -1)
						return [b[0] + b[1], 'O'];
					if (operators.indexOf(b[0]) != -1)
						return [b[0], 'O'];
					if ([','].indexOf(b[0]) != -1)
						return [',', 'Z'];
					if (['('].indexOf(b[0]) != -1)
						return ['(', '('];
					if ([')'].indexOf(b[0]) != -1)
						return [')', ')'];
					if (['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.'].indexOf(b[0]) != -1) {
						var out = '';
						if (/^[0][r][IVXLCDM]*/.test(b))
							out=/^[0][r][IVXLCDM]*/.exec(b)[0];
						else
						if (b[0]=='.' && /^[.][0123456789]+[e][+-]?[0123456789]+/.test(b))
						{
							out=/^[.][0123456789]+[e][+-]?[0123456789]+/.exec(b)[0];
						}
						else if (b[0]!='.' && /^[0123456789]+[.]?[0123456789]*[e][+-]?[0123456789]+/.test(b))
						{
							out=/^[0123456789]+[.]?[0123456789]*[e][+-]?[0123456789]+/.exec(b)[0];
						}
						else if (/^[0123456789]+[@][0123456789 ]*[;]?[0123456789 ]+/.test(b))
						{
							out=/^[0123456789]+[@][0123456789 ]*[;]?[0123456789 ]+/.exec(b)[0].replace(/\s+$/, '');
						}else
						{
							var i = 0;
							while (i < b.length && '0123456789.abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').indexOf(b[i]) != -1) {
								out += b[i];
								i++;
							}
						}
						return [out, 'N'];
					}
					var i = 0;
					while (i < b.length && ItisName('a'+b[i]))
						i++;
					i++;
					if (b.substring(0, i - 1).trim() == "")
						return [-1, -1];
					if (b.substring(i - 1, b.length - 1).trim()[0] == '(')
						return [b.substring(0, i - 1).trim(), 'F'];
					return [b.substring(0, i - 1).trim(), 'V'];
				}
				var iii = 0;
				persing_log = "";
				while (a.length > 0) {
					iii++;
					if (iii > 100000) {
						persing_log += 'Превышено время анализа этого выражения.\r\n'
						persing_log += 'Анализ завершён на "' + a + '". \r\n';
						return;
					}
					if (token != undefined && token[1] == '(' && readtoken(a)[1] == ')') {
						persing_log += 'Выражение либо пустое, либо после "(" идёт ")".\r\n'
						persing_log += 'Анализ завершён на "' + a + '". \r\n';
						return;
					}
					token = readtoken(a);

					if (token[0] == -1) {
						persing_log += 'Не удалось прочитать токен\r\n'
						persing_log += 'Анализ завершён на "' + a + '". \r\n';
						return;
					}
					a = a.substring(a.indexOf(token[0]) + token[0].length, a.length);
					if (token[1] == 'V') //value
					{
						outFormula.push(NameToNameVal(token[0]));
					} else
						if (token[1] == 'N') //number
						{
							outFormula.push(token[0]);
						} else
							if (token[1] == 'F') //function
							{
								stack.push([NameToNameVal(token[0]) + '$', token[1]]);
							} else
								if (token[1] == 'Z') //,
								{
									while (stack[stack.length - 1][1] != '(') {
										outFormula.push(stack.pop()[0]);
										if (stack.length == 0) {
											persing_log += 'В выражении пропущена запятая или(и) открывающая скобка.\r\n'
											persing_log += 'Анализ завершён на "' + a + '". \r\n';
											return;
										}
									}
									if (stack.length > 1 && stack[stack.length - 2][1] == 'F')
										stack[stack.length - 2][0] += '$'; //для последующего использования || кол во аргументов
								} else
									if (token[1] == 'O') //operators 'и','или','<=','>=','<>','**','*','/','+','-']
									{
										while (stack.length > 0 && ((stack[stack.length - 1][1] == 'O' && ParseOperators[operators.indexOf(token[0])].indexOf(stack[stack.length - 1][0]) != -1) || (stack[stack.length - 1][1] == 'F'))) {
											outFormula.push(stack.pop()[0]);
											if (stack.length == 0) {
												break;
											}
										}
										stack.push(token);
									} else
										if (token[1] == '(') //(
										{
											stack.push(token);
										} else
											if (token[1] == ')') //)
											{
												if (stack.length == 0) {
													persing_log += 'В выражении пропущена открывающая скобка.\r\n'
													persing_log += 'Анализ завершён на "' + a + '". \r\n';
													return;
												}
												while (stack[stack.length - 1][1] != '(') {
													outFormula.push(stack.pop()[0]);
													if (stack.length == 0) {
														persing_log += 'В выражении пропущена запятая или(и) открывающая скобка.\r\n'
														persing_log += 'Анализ завершён на "' + a + '". \r\n';
														return;
													}
												}
												stack.pop();
												if (stack.length > 0 && stack[stack.length - 1][1] == 'F')
													outFormula.push(stack.pop()[0] + '(');
											}

				}
				while ((stack.length != 0)) {
					outFormula.push(stack.pop()[0]);
				}
				for (var i = 0; i < outFormula.length; i++) 
					if (outFormula[i]=='('||outFormula[i]==')'){
						persing_log += 'В выражении пропущена скобка.\r\n'
						persing_log += 'Анализ завершён на "' + a + '". \r\n';
						return;
					}
				//перевод в функциональную запись
				stack = [];
				var stack2 = [];
				for (var i = 0; i < outFormula.length; i++) {
					if (outFormula[i]!='' && ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.'].indexOf(outFormula[i][0]) != -1){ //&& /^[0]?[box]?[0123456789abcdef]*[.]?[0123456789abcdef]*$/.test(outFormula[i])) {
						stack.push("cl_str2num('"+outFormula[i]+"')");
						var v=cl_str2num(outFormula[i]);
						if (v==undefined)
						{
							persing_log += outFormula[i]+' не число \r\n'
							return;
						}
						stack2.push(v);
					} else
						if (Object.keys(operator2function).indexOf(outFormula[i])+1)
						{
							if (stack.length < 2) {
								persing_log += 'Неправильное использование оператора "'+outFormula[i]+'". \r\n'
								return;
							}
							var v1 = stack.pop();
							var v2 = stack.pop();
							var v1_2 = stack2.pop();
							var v2_2 = stack2.pop();
							var v=operator2function[outFormula[i]][1](v2_2,v1_2);
							if (v==undefined)
							{
								persing_log += 'Значение '+outFormula[i]+' неопределено\r\n'
								return;
							}
							stack.push(operator2function[outFormula[i]][0]+'(' + v2 + ',' + v1 + ')');
							stack2.push(v);
						}else
							if (outFormula[i] == '~~') {
								if (stack.length < 1) {
									persing_log += 'Неправильное использование оператора "унарный минус". \r\n'
									return;
								}
								var v1 = stack.pop();
								var v1_2 = stack2.pop();
								stack.push('-(' + v1 + ')');
								stack2.push(-v1_2);
							} else
							if (outFormula[i] == '!') {
								if (stack.length < 1) {
									persing_log += 'Неправильное использование оператора "!". \r\n'
									return;
								}
								var v1 = stack.pop();
								var v1_2 = stack2.pop();
								var v=cl_nf('fact',[v1_2]);
								if (v==undefined)
								{
									persing_log += 'Значение '+outFormula[i]+' неопределено\r\n'
									return;
								}
								stack.push('cl_nf(\'fact\',[' + v1 + '])');
								stack2.push(v);
							} else
							if (outFormula[i] == '**') {
								if (stack.length < 2) {
									persing_log += 'Неправильное использование оператора "**". \r\n'
									return;
								}
								var v1 = stack.pop();
								var v2 = stack.pop();
								var v1_2 = stack2.pop();
								var v2_2 = stack2.pop();
								var v=cl_pow(v2_2,v1_2);
								if (v==undefined)
								{
									persing_log += 'Значение ** неопределено\r\n'
									return;
								}
								stack.push('cl_pow(' + v2 + ',' + v1 + ')');
								stack2.push(v);
							} else
								if (outFormula[i] == '*') {
									if (stack.length < 2) {
										persing_log += 'Неправильное использование оператора "*". \r\n'
										return;
									}
									var v1 = stack.pop();
									var v2 = stack.pop();
									var v1_2 = stack2.pop();
									var v2_2 = stack2.pop();
									stack.push('cl_mult(' + v2 + ',' + v1 + ')');
									stack2.push(cl_mult(v2_2,v1_2));
								} else
									if (outFormula[i] == '/') {
										if (stack.length < 2) {
											persing_log += 'Неправильное использование оператора "/". \r\n'
											return;
										}
										var v1 = stack.pop();
										var v2 = stack.pop();
										var v1_2 = stack2.pop();
										var v2_2 = stack2.pop();
										stack.push('cl_div(' + v2 + ',' + v1 + ')');
										var v=cl_div(v2_2,v1_2);
										if (v==undefined)
										{
											persing_log += 'Деление на 0!!! \r\n'
											return;
										}
										stack2.push(v);
									} else
										if (outFormula[i] == '+') {
											if (stack.length < 2) {
												persing_log += 'Неправильное использование оператора "+". \r\n'
												return;
											}
											var v1 = stack.pop();
											var v2 = stack.pop();
											var v1_2 = stack2.pop();
											var v2_2 = stack2.pop();
											stack.push('cl_sum(' + v2 + ',' + v1 + ')');
											stack2.push(cl_sum(v2_2,v1_2));
										} else
											if (outFormula[i] == '-') {
												if (stack.length < 2) {
													persing_log += 'Неправильное использование оператора "-". \r\n'
													return;
												}
												var v1 = stack.pop();
												var v2 = stack.pop();
												var v1_2 = stack2.pop();
												var v2_2 = stack2.pop();
												stack.push('cl_sub(' + v2 + ',' + v1 + ')');
												stack2.push(cl_sub(v2_2,v1_2));
											} else
												if (ItisName(outFormula[i])) {
													if (['pi','e','f','eps'].indexOf(outFormula[i]) == -1)
													{
														persing_log += 'Неизвестная переменная('+outFormula[i]+')\r\n'
														return;
													}
													stack.push("cl_getConst('"+outFormula[i]+"')");
													stack2.push(cl_getConst(outFormula[i]));
													
												} else
														if (outFormula[i].indexOf('(') == outFormula[i].length - 1) {
															if (stack.length < outFormula[i].split('$').length - 1) {
																persing_log += 'Неверное количество параметров функции "'+outFormula[i]+'" \r\n'
																return;
															}
															var s = [];
															for (var k = outFormula[i].split('$').length - 1; k > 1; k--)
																s.push(stack[stack.length - k]);
															if (outFormula[i].split('$').length - 1 > 0)
																s.push(stack[stack.length - 1]);
															
															var s2 = [];
															for (var k = outFormula[i].split('$').length - 1; k > 1; k--)
																s2.push(stack2[stack2.length - k]);
															if (outFormula[i].split('$').length - 1 > 0)
																s2.push(stack2[stack2.length - 1]);
																
															for (var k = outFormula[i].split('$').length - 1; k > 0; k--)
															{
																stack.pop();
																stack2.pop();
															}
															var name=outFormula[i].split('(')[0].split('$')[0];
															//FUNCTIONS
															if (name.slice(0,3)=='nn_' && Object.getOwnPropertyNames(Math).indexOf(name.slice(3))>=0 && typeof Math[name.slice(3)]=='function')
															{
																stack.push('cl_nnf(\''+name.slice(3)+'\',[' + s.join(',')+ '])');
																var v=cl_nnf(name.slice(3),s2);
																if (v==undefined){persing_log += 'Значение '+name+' неопределено \r\n';return;}
																stack2.push(v);
															}else if (nfobg[name]!=undefined)
															{
																stack.push('cl_nf(\''+name+'\',[' + s.join(',')+ '])');
																var v=cl_nf(name,s2);
																if (v==undefined){persing_log += 'Значение '+name+' неопределено \r\n';return;}
																stack2.push(v);
															}else if (name=='sqrt')
															{
																if (s.length!=1&&s.length!=2){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																if (s.length==1)
																	stack.push('cl_sqrt(' + s.join(',')+ ')');
																else
																	stack.push('cl_sqrtb(' + s.join(',')+ ')');
																var v;
																if (s.length==1)
																	v=cl_sqrt(s2[0]);
																else
																	v=cl_sqrtb(s2[0],s2[1]);
																if (v==undefined){persing_log += 'Значение sqrt неопределено \r\n';return;}
																stack2.push(v);
																
															}else if (/^sqrt[0123456789]+$/.test(name))
															{
																if (s.length!=1){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_sqrtb(' + s.join(',')+ ',cl_str2num(\''+name.split('sqrt')[1]+'\'))');
																var v=cl_sqrtb(s2[0],cl_str2num(name.split('sqrt')[1]));
																if (v==undefined){persing_log += 'Значение sqrt неопределено \r\n';return;}
																stack2.push(v);
																
															}else if (name=='exp')
															{
																if (s.length!=1){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_exp(' + s.join(',')+ ')');
																
																var v=cl_exp(s2[0]);
																stack2.push(v);
																
															}else if (name=='log')
															{
																if (s.length!=2){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('log(' + s.join(',')+ ')');
																
																var v=cl_logb(s2[0],s2[1]);
																if (v==undefined){persing_log += 'Значение log неопределено \r\n';return;}
																stack2.push(v);
																
															}else if (/^log[0123456789]+$/.test(name)) // log<base>
															{
																if (s.length!=1){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_logb(' + s.join(',')+ ',cl_str2num(\''+name.split('log')[1]+'\'))');
																
																var v=cl_logb(s2[0],cl_str2num(name.split('log')[1]));
																if (v==undefined){persing_log += 'Значение log'+name.split('log')[1]+' неопределено \r\n';return;}
																stack2.push(v);
																
															}else if (name=='ln')
															{
																if (s.length!=1){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_ln(' + s.join(',')+')');
																
																var v=cl_ln(s2[0]);
																if (v==undefined){persing_log += 'Значение ln неопределено \r\n';return;}
																stack2.push(v);
																
															}else if (name=='abs'||name=='ceil'||name=='floor'||name=='round'||name=='trunc'||name=='sign')
															{
																if (s.length!=1){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_'+name+'(' + s.join(',')+')');
																
																var v;
																if (name=='abs') v=cl_abs(s2[0]); else 
																if (name=='ceil') v=cl_ceil(s2[0]); else 
																if (name=='floor') v=cl_floor(s2[0]); else 
																if (name=='round') v=cl_round(s2[0]); else 
																if (name=='trunc') v=cl_trunc(s2[0]); else v=cl_sign(s2[0]);
																stack2.push(v);
																
															}else if (name=='min')
															{
																if (s.length<2){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_min([' + s.join(',')+'])');
																stack2.push(cl_min(s2));
																
															}else if (name=='max')
															{
																if (s.length<2){persing_log += 'Неверное количество параметров функции "'+name+'" \r\n';return;}
																
																stack.push('cl_max([' + s.join(',')+'])');
																stack2.push(cl_max(s2));
																
															}else
															{
																persing_log += 'Неизвестная функция "'+name+'" \r\n';
																return;
															}
															
														} else {
															persing_log += 'Неизвестная команда "' + outFormula[i] + '". \r\n'
															return;
														}
					//return [b[0], 'O'];)
				}
				if (stack.length != 1) {
					persing_log += 'Что то не то в данной формуле.\r\nCтек:\r\n' + stack.join();
					return;
				}
				return [stack,stack2];
			}
			function str2dec(s)
			{
				var z=s.indexOf('.');
				if (z<0)
				{
					z=s.length;
					s=s+'.';
				}
				while (z%9!=0)
				{
					z+=1;
					s='0'+s;
				}
				while (s.length%9!=1)
				{
					s=s+'0';
				}
				
				var out1='';
				var out2='';
				var s3='';
				for (var i=Math.max(z-9*111,0);i<Math.min(z+9*112,s.length);i++)
				{
					if (i==z)
					{
						out1+='|||';
						out2+='|||';
					}
					else if (i<z)
					{
						if ((z-i)%9==0)
						{
							out1+='|';
							out2+='|';
							s3='1e'+(z-i-1);
							s3+=' 1e'+(z-i-9);
							if (12-s3.length<1)
							{
								out1='|';
								out2='';
							}else
							{
								s3=s3.replace(' ',' '.repeat(12-s3.length));
								out2+=s3;
							}
						}else if ((z-i)%3==0)
						{
							out1+='.';
						}
						out1+=s[i];
					}
					else if (i>z)
					{
						if ((i-z)>10*9)
							break;
						out1+=s[i];
						if ((i-z)%9==0)
						{
							out1+='|';
							s3='1e-'+(i-z-8);
							s3+=' 1e-'+(i-z);
							if (12-s3.length<1)
							{
								
							}else
							{
								s3=s3.replace(' ',' '.repeat(12-s3.length));
								out2+=s3;
							}
							out2+='|';
						}else if ((i-z)%3==0)
						{
							out1+='.';
						}
					}
				}
				return out1+'\n'+out2;
				
			}
			var area;
			var output_programm,output_programm2;
			var output,output2;
			var precision;
			var rounding;
			var output_bin,output_exp;
			var needbase;
			var output_inf_fraction;
			var output_fractions;
			var output_roman;
			var needvalhash='';
			setInterval(()=>{if (window.location.hash!=needvalhash)window.location.hash=needvalhash},1000);
			function onupdate(xx)
			{
				if (rounding.checked)
					cl_width=Math.max(-precision.value+__rounding_width,1);
				else
					cl_width=Math.max(-precision.value,1);
				needbase.value=Math.min(Math.max(needbase.value,1),9007199254740991);
				var t=new Date();
				if (1)
				{
					var otv='';
					try {
						otv=parseFormula(area.value.replace(/\n/gi,' '));
					} catch(e) {
						persing_log='Err: ' + e;
					}
					
					
					needvalhash='#'+encodeURI(area.value);
					if (persing_log!='')
					{
						area.style.background='rgb(170,10,10)';
						output_programm.textContent='NaN';
						output_programm2.textContent='NaN';
						output.textContent=persing_log;
						output2.textContent='NaN\nNaN';
						output_bin.textContent='NaN';
						output_exp.textContent='NaN';
						output_inf_fraction.textContent = 'NaN';
						output_fractions.textContent = 'NaN';
						output_roman.textContent = 'NaN';
					}else if (xx==-1) copyTextToClipboard(cl_num2str(otv[1][0],0));
					else if (xx==-2) copyTextToClipboard(cl_num2str(otv[1][0],3));
					else if (xx==-3) copyTextToClipboard(cl_num2str(otv[1][0],2));
					else if (xx==-6) copyTextToClipboard(cl_num2str(otv[1][0],6));
					else if (xx==-8) copyTextToClipboard(cl_num2str(otv[1][0],8));
					else if (xx==-4) copyTextToClipboard(cl_num2str(otv[1][0],4));
					else if (otv[1][0]>(1n<<1000000n))
					{
						area.style.background='rgb(170,10,10)';
						output_programm.textContent='NaN';
						output_programm2.textContent='NaN';
						output.textContent='Число чёт очень большое, я боюсь его парсить.\nДля получения ответа используйте копирование.';
						output2.textContent='NaN\nNaN';
						output_bin.textContent='NaN';
						output_exp.textContent='NaN';
						output_inf_fraction.textContent = 'NaN';
						output_fractions.textContent = 'NaN';
						output_roman.textContent = 'NaN';
					}
					else
					{
						area.style.background='rgb(68,68,70)';
						output_programm.textContent='cl_num2str('+otv[0][0]+')';
						output_programm2.textContent='cl_num2str(cl_eval(\''+area.value.replace(/\n/gi,' ')+'\'))';
						//console.log('toDec');
						//var t=performance.now();
						output.textContent=cl_num2str(otv[1][0],0).trim();
						if (output.textContent[0]=='-')
							output2.textContent=str2dec(output.textContent.slice(1));
						else 
							output2.textContent=str2dec(output.textContent);
						//console.log('toDec',performance.now()-t);
						//console.log('toBase');
						//var t=performance.now();
						output_bin.textContent=cl_num2str(otv[1][0],1).trim();
						//console.log('toBase',performance.now()-t);
						//console.log('toExp');
						//var t=performance.now();
						output_exp.textContent=cl_num2str(otv[1][0],2).trim();
						//console.log('toExp',performance.now()-t);
						output_inf_fraction.textContent = cl_num2str(otv[1][0],5).trim();
						output_fractions.textContent = cl_num2str(otv[1][0],7).trim();
						output_roman.textContent = cl_num2str(otv[1][0],4).trim();
						
						
						//if (new Date()-t<1000)
					}
				}
				if (new Date()-t<5000)
				{
					SaveVal('formula_data',area.value);
					SaveVal('precision_data',precision.value);
					SaveVal('rounding_data',rounding.checked?'true':'');
					SaveVal('needbase_data',needbase.value);
				}
			}
			function onload()
			{
				area = document.getElementById('formula');
				output_programm = document.getElementById('programm');
				output_programm2 = document.getElementById('programm2');
				output = document.getElementById('output');
				output2 = document.getElementById('output2');
				precision = document.getElementById('precision');
				rounding = document.getElementById('rounding');
				output_bin = document.getElementById('output_bin');
				output_exp = document.getElementById('output_exp');
				output_inf_fraction = document.getElementById('output_inf_fraction');
				output_fractions = document.getElementById('output_fractions');
				output_roman = document.getElementById('output_roman');
				
				
				needbase = document.getElementById('needbase');
				area.addEventListener('input', onupdate, false);
				
				precision.addEventListener('input', onupdate, false);
				rounding.addEventListener('input', onupdate, false);
				needbase.addEventListener('input', onupdate, false);
				if (window.location.hash.slice(1)!='' && decodeURI(window.location.hash.slice(1))!=GetVal('formula_data','2+2') && confirm('Адрес содержит формулу. Хотите ею воспользоваться?'))
					area.value=decodeURI(window.location.hash.slice(1));
				else
					area.value=GetVal('formula_data','2+2');
				precision.value=parseInt(GetVal('precision_data','-1000'));
				rounding.checked=GetVal('rounding_data','true')!='';
				needbase.value=GetVal('needbase_data','2');
				onupdate();
			}
		</script>
		<style>
			div::-webkit-scrollbar {
				width: 10px;
				height: 10px; 
			}

			div::-webkit-scrollbar-track {
				background: #ffffff12;
				border-radius: 5px;
			}

			div::-webkit-scrollbar-thumb {
				background-color: white;
				border-radius: 5px;
				border: 3px solid #444446;
			}
			textarea::-webkit-scrollbar {
				width: 12px;
				height: 12px; 
				cursor:pointer;
				
			}

			textarea::-webkit-scrollbar-track {
				background: #ff000000;
				border-radius: 5px;
			}

			textarea::-webkit-scrollbar-thumb {
				background-color: white;
				border-radius: 6px;
				border: 3px solid #444446;
			}
			table {
				font-size: 14px;
				width: 500px;
				background: #333336;
				text-align: center;
				color: #e0e0e0;;
				border-spacing: 0;
			}
			table th:first-child, table td:first-child {
				color: #ffffff;
			}
			table th {
				color: #ffffff;
				font-weight: normal;
				border: 1px solid white;
				padding: 2px 2px;
				background: #4c4c4c;
				border-width: 1px 0 1px 1px;
			}
			table td {
				border: 1px solid white;
				padding: 2px 2px;
				border-width: 1px 0 0 1px;
			}


/* top-left border-radius */
table tr:first-child th:first-child {
  border-top-left-radius: 6px;
}

table tr:first-child th:last-child {
  border-width: 1px 1px 1px 1px;
}

/* top-right border-radius */
table tr:first-child th:last-child {
  border-top-right-radius: 6px;
}

table tr td:last-child {
  border-width: 1px 1px 0px 1px;
}
/* bottom-left border-radius */
table tr:last-child td:first-child {
  border-bottom-left-radius: 6px;
}

/* bottom-right border-radius */
table tr:last-child td:last-child {
  border-bottom-right-radius: 6px;
}

table tr:last-child td {
  border-width: 1px 0px 1px 1px;
}
table tr:last-child td:last-child {
  border-width: 1px 1px 1px 1px;
}
			table tr.topline.topline2 td{
				border-top: 3px solid white;
			}

			var {
				background: #444446;
				color:rgb(255,255,255);
				border: 1px solid rgb(127,127,127);
				border-radius: 3px;
				padding-top: 0px;
				padding-right: 5px;
				padding-bottom: 0px;
				padding-left: 5px;
				font-style: inherit;
			}
			p {
				margin-top: 0px;
				margin-right: 0px;
				margin-bottom: 0px;
				margin-left: 0px;
				line-height: 1.6;
			}
		</style>
	</head>
	<body onload="onload();">
		<div style="background:rgb(51,51,54);color:rgb(255,255,255);border: 3px solid rgb(127,127,127);border-radius: 8px;height:90%;width:550px;margin:0;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%)">
			<div style="overflow-x: hidden;overflow-y: scroll;width: 100%;height: 100%;">
				<div style="">
					<h1 style="margin: 10px;text-align: center;">О калькуляторе</h1>
					<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin-left: 25px;padding: 5px;text-indent: 20px;width: 490px;">
							<p style="text-align: center;"><b> Это калькулятор!!! </b></p>
						<br>
							<p> У нас нет цели заставить его решать что-либо. </p>
							<p> Для этого есть <a href="URL" style="color: #b9c5ff;">Wolfram</a> и <a href="URL" style="color: #b9c5ff;">Photomath</a>. </p>
						<br>
							<p> У нас нет цели заставить его строить графики. </p>
							<p> Для этого есть <a href="URL" style="color: #b9c5ff;">Desmos</a>. </p>
						<br>
							<p> Он предназначен для очень точных и быстрых расчётов (например при написании отборочных этапов по математике), а так же работы с системами счисления (например при написании отборочных этапов по информатике). </p>
					</div>
				</div>
				<div style="">
					<h1 style="margin: 10px;text-align: center;">Настройки</h1>
					<h4 style="text-align: center;margin: 0px;" title="Машинный эпсилон">Точность: 10** <input style="border-radius: 4px;margin: 4px;font-size: 16px;background:rgb(68,68,70);color:rgb(255,255,255);width: 100px;" type="number" id="precision" max="-1" value="-1000"></h4>
					<h4 style="text-align: center;margin: 0px;" title="Округляет число до ближайшего кратного указанному значению точности">Округление: <input type="checkbox" id="rounding" style="margin: 4px;margin-right: 84px;" checked></h4>
					<!--<h4 style="text-align: center;margin: 0px;" title="Делает расчет два раза с разными настройками точности">Проверка: <input type="checkbox" id="testing" style="margin: 4px;margin-right: 176px;" checked></h4>-->
				</div>
				<div style="overflow: hidden;height:60px;transition: height 2s ease-in-out 0s;" id="manual">
					<h1 style="margin: 10px;text-align: center;text-decoration: underline;color: #b9c5ff;" onclick="var e=document.getElementById('manual');if (e.style.height!='60px')e.style.height='60px';else e.style.height=e.scrollHeight+'px';">Руководство</h1>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Операторы:</h4>
					<table style="margin-left: 25px;">
						<tr>
							<th>Оператор</th>
							<th>Приоритет</th>
							<th style="width: 95px;">Описание</th>
							<th>Скорость</th>
						</tr>
						<tr>
							<td>|</td>
							<td>9<br>(низший)</td>
							<td>Битовое ИЛИ *</td>
							<td style="background:#00FF0018;">O(log max(a,b))</td>
						</tr>
						<tr>
							<td>^</td>
							<td>8</td>
							<td>Битовое исключающее ИЛИ (XOR) *</td>
							<td style="background:#00FF0018;">O(log max(a,b))</td>
						</tr>
						<tr>
							<td>&</td>
							<td>7</td>
							<td>Битовое И *</td>
							<td style="background:#00FF0018;">O(log max(a,b))</td>
						</tr>
						<tr>
							<td>&lt;&lt;</td>
							<td>6</td>
							<td>Битовый сдвиг влево *</td>
							<td style="background:#00FF0018;">O(log a ∙ b)</td>
						</tr>
						<tr>
							<td>&gt;&gt;</td>
							<td>6</td>
							<td>Битовый сдвиг вправо *</td>
							<td style="background:#00FF0018;">O(log a ∙ b)</td>
						</tr>
						<tr>
							<td>+</td>
							<td>5</td>
							<td>Сложение</td>
							<td style="background:#00FF0018;">O(log max(a,b))</td>
						</tr>
						<tr>
							<td>-</td>
							<td>5</td>
							<td>Вычитание</td>
							<td style="background:#00FF0018;">O(log max(a,b))</td>
						</tr>
						<tr>
							<td>*</td>
							<td>4</td>
							<td>Умножение</td>
							<td style="background:#00FF0018;">O(log max(a,b) ∙ log log max(a,b))</td>
						</tr>
						<tr>
							<td>/</td>
							<td>4</td>
							<td>Деление</td>
							<td style="background:#00FF0018;">O(log max(a,b) ∙ log log max(a,b)) ?</td>
						</tr>
						<tr>
							<td>//</td>
							<td>4</td>
							<td>Целочисленное деление *</td>
							<td style="background:#00FF0018;">O(log max(a,b) ∙ log log max(a,b)) ?</td>
						</tr>
						<tr>
							<td>%</td>
							<td>4</td>
							<td>Остаток от деления *</td>
							<td style="background:#00FF0018;">O(log max(a,b) ∙ log log max(a,b)) ?</td>
						</tr>
						<tr>
							<td>**</td>
							<td>3</td>
							<td>Возведение в степень</td>
							<td style="background:linear-gradient(#00ff0018 30%,#FF000018 70%);">Для целых:<br>O(log a ∙ b)<br>Для вещественных:<br>O(log<sup>2</sup> a)</td>
						</tr>
						<tr>
							<td>!</td>
							<td>2</td>
							<td>Работает как <var>fact(a)</var></td>
							<td style="background:#FF000018;">O(a<sup>2</sup>)</td>
						</tr>
						<tr>
							<td>- (~~)</td>
							<td>1<br>(наивысший)</td>
							<td>Унарный минус</td>
							<td style="background:#00FF0018;">O(1)</td>
						</tr>
						<tr>
							<td colspan="4">* - операнды округляются функцией <var>round</var></td>
						</tr>
						<tr>
							<td colspan="4">? - асимптотика определена приблизительно</td>
						</tr>
					</table>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Запись числа:</h4>
					<table style="margin-left: 25px;">
						<tr>
							<th style="width: 235px;">Шаблон</th>
							<th>Примеры</th>
							<th>Описание</th>
						</tr>
						<tr>
							<td>&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]</td>
							<td>255<br>9.8<br>3.14</td>
							<td>Число в десятичной системе счисления<br>[с дробной частью]</td>
						</tr>
						<tr>
							<td>0x&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]</td>
							<td>0xff<br>0x9.c<br>0x3.23</td>
							<td>Число в шестнадцатеричной системе счисления<br>[с дробной частью]</td>
						</tr>
						<tr>
							<td>0o&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]</td>
							<td>0o377<br>0o11.6<br>0o3.106</td>
							<td>Число в восьмеричной системе счисления<br>[с дробной частью]</td>
						</tr>
						<tr>
							<td>0b&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]</td>
							<td>0b11111111<br>0b1001.11<br>0b11.001</td>
							<td>Число в двоичной системе счисления<br>[с дробной частью]</td>
						</tr>
						<tr>
							<td>&lt;Основание&gt;b&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]</td>
							<td>7b513<br>5b14.4<br>11b3.15a</td>
							<td>Число в заданной системе счисления<br>[с дробной частью]<br>1<=Основание<=62</td>
						</tr>
						<tr>
							<td style="font-size: 12px;">&lt;Основание&gt;@&lt;Цел ч&gt;[;&lt;Дроб ч&gt;]</td>
							<td style="font-size: 12px;">128@001 127<br>90@09;72<br>140@3;19 84</td>
							<td>Число в заданной системе счисления<br>[с дробной частью]<br>2<=Основание</td>
						</tr>
						<tr>
							<td>&lt;Цел ч&gt;[.&lt;Дроб ч&gt;]e[+-]&lt;Порядок&gt;</td>
							<td>2.55e2<br>98e-1<br>.314e1</td>
							<td>Экспоненциальная запись числа</td>
						</tr>
						<tr>
							<td>0r&lt;Цел ч&gt;</td>
							<td>0rCCLV<br>0rXCVIII/0rX<br>0rXXXI/0rX</td>
							<td>Число в римской системе счисления</td>
						</tr>
						<tr>
							<td colspan="3">В одной формуле могут встречаться разные виды записи чисел</td>
						</tr>
					</table>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Нативные функции (с поддержкой длинной арифметики):</h4>
					<table style="margin-left: 25px;">
						<tr>
							<th>Название</th>
							<th>Описание</th>
							<th>Скорость</th>
						</tr>
						<tr>
							<td>min(arg...)</td>
							<td>Возвращает наименьшее из двух или более чисел</td>
							<td style="background:#00FF0018;">O(arg.length)</td>
						</tr>
						<tr>
							<td>max(arg...)</td>
							<td>Возвращает наибольшее из двух или более чисел</td>
							<td style="background:#00FF0018;">O(arg.length)</td>
						</tr>
						<tr class="topline topline2">
							<td>abs(a)</td>
							<td>Абсолютное значение числа (модуль числа)</td>
							<td style="background:#00FF0018;">O(log a)</td>
						</tr>
						<tr class="topline topline2">
							<td>ceil(a)</td>
							<td>Округляет аргумент до ближайшего большего целого</td>
							<td style="background:#00FF0018;">O(log a)</td>
						</tr>
						<tr>
							<td>floor(a)</td>
							<td>Округляет аргумент до ближайшего меньшего целого</td>
							<td style="background:#00FF0018;">O(log a)</td>
						</tr>
						<tr>
							<td>round(a)</td>
							<td>Возвращает число, округлённое к ближайшему целому</td>
							<td style="background:#00FF0018;">O(log a)</td>
						</tr>
						<tr>
							<td>trunc(a)</td>
							<td>Возвращает целую часть числа путём удаления всех дробных знаков</td>
							<td style="background:#00FF0018;">O(log a)</td>
						</tr>
						<tr class="topline topline2">
							<td>sign(a)</td>
							<td>Возвращает 1 0 -1, если число положительное, ноль или отрицательное соответственно</td>
							<td style="background:#00FF0018;">O(1)</td>
						</tr>
						<tr class="topline topline2">
							<td>sqrt(a)</td>
							<td>Квадратный корень</td>
							<td style="background:#FFFF0018;">O(log a ∙ log sqrt a)</td>
						</tr>
						<tr>
							<td>sqrt&lt;b&gt;(a)</td>
							<td>Корень b-й степени <var style="font-style: inherit;">b &#8712; &#8469;</var></td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr>
							<td>sqrt(a, b)</td>
							<td>Корень b-й степени</td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr class="topline topline2">
							<td>log&lt;b&gt;(a)</td>
							<td>Логарифм с основанием <var style="font-style: inherit;">b &#8712; &#8469;</var></td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr>
							<td>log(a, b)</td>
							<td>Логарифм с основанием b</td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr>
							<td>ln(a)</td>
							<td>Натуральный логарифм</td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr class="topline topline2">
							<td>exp(a)</td>
							<td>Экспонента <var>e<sup>a</sup></var></td>
							<td style="background:#FF000018;">O(inv_fact(1/eps) ∙ log a)</td>
						</tr>
						<tr class="topline topline2">
							<td>fact(a)</td>
							<td>Факториал <var>a!</var><br>Для вещественных чисел использует аппроксимацию, что даёт погрешность в ~20 знаков</td>
							<td style="background:#FF000018;">O(a<sup>2</sup>)</td>
						</tr>
						<tr class="topline topline2">
							<td>gcd(arg...)</td>
							<td>Наибольший общий делитель</td>
							<td style="background:#00FF0018;">O(log max(arg))</td>
						</tr>
						<tr>
							<td>lcm(arg...)</td>
							<td>Наименьшее общее кратное</td>
							<td style="background:#00FF0018;">O(log max(arg))</td>
						</tr>
						<tr class="topline topline2">
							<td>fib(a)</td>
							<td>a-е число последовательности Фибоначчи</td>
							<td style="background:#FF000018;">O(log<sup>2</sup> a)</td>
						</tr>
						<tr class="topline topline2">
							<td>isprime(a)</td>
							<td>Возвращает 1 или 0 в зависимости от простоты <var>a</var></td>
							<td style="background:#FF000018;">O(log<sup>3</sup> a)</td>
						</tr>
						<tr>
							<td>nextprime(a)</td>
							<td>Возвращает наименьшее простое число, которое больше чем <var>a</var></td>
							<td style="background:#FF000018;">O(log<sup>3</sup> a)</td>
						</tr>
						<tr>
							<td>lastprime(a)</td>
							<td>Возвращает наибольшее простое число, которое меньше чем <var>a</var></td>
							<td style="background:#FF000018;">O(log<sup>3</sup> a)</td>
						</tr>
						
						
						
						
					</table>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Константы (переменные):</h4>
					<table style="margin-left: 25px;">
						<tr>
							<th>Название</th>
							<th>Описание</th>
							<th>Примерное значение</th>
						</tr>
						<tr>
							<td>pi</td>
							<td>Число <var>π</var></td>
							<td>3.14159</td>
						</tr>
						<tr>
							<td>e</td>
							<td>число Эйлера (число Непера)</td>
							<td>2.71828</td>
						</tr>  
						<tr>
							<td>f</td>
							<td>Золотое сечение</td>
							<td>1.61803</td>
						</tr> 
						<tr>
							<td>eps</td>
							<td>Машинный эпсилон</td>
							<td>0.000...0001</td>
						</tr>
					</table>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Не нативные функции (точность ~1e-10):</h4>
					<table style="margin-left: 25px;" id="nonative">
						<tr>
							<th>Название</th>
							<th>Описание</th>
							<th>Скорость</th>
						</tr>
					</table>
					<script>
						var nonative=document.getElementById('nonative');
						var fs=Object.getOwnPropertyNames(Math);
						var descriptions={
							'abs':'Возвращает абсолютное значение числа',
							'acos':'Возвращает арккосинус числа',
							'acosh':'Возвращает гиперболический арккосинус числа',
							'asin':'Возвращает арксинус числа',
							'asinh':'Возвращает гиперболический арксинус числа',
							'atan':'Возвращает арктангенс числа',
							'atanh':'Возвращает гиперболический арктангенс числа',
							'atan2':'Возвращает арктангенс от частного своих аргументов',
							'cbrt':'Возвращает кубический корень числа',
							'ceil':'Возвращает значение числа, округлённое к большему целому',
							'clz32':'Возвращает количество ведущих нулей 32-битного целого числа',
							'cos':'Возвращает косинус числа',
							'cosh':'Возвращает гиперболический косинус числа',
							'exp':'Возвращает <var>E<sup>x</sup></var>, где x — аргумент, а E — число Эйлера (2,718…), основание натурального логарифма',
							'expm1':'Возвращает exp, из которого вычли единицу',
							'floor':'Возвращает значение числа, округлённое к меньшему целому',
							'fround':'Возвращает ближайшее число с плавающей запятой одинарной точности, представляющие это число',
							'hypot':'Возвращает квадратный корень из суммы квадратов своих аргументов',
							'imul':'Возвращает результат умножения 32-битных целых чисел',
							'log':'Возвращает натуральный логарифм числа (<var>log<sub>e</sub></var>, также известен как <var>ln</var>)',
							'log1p':'Возвращает натуральный логарифм числа <var>1 + x</var> (<var>log<sub>e</sub></var>, также известен как <var>ln</var>)',
							'log10':'Возвращает десятичный логарифм числа',
							'log2':'Возвращает двоичный логарифм числа',
							'max':'Возвращает наибольшее число из своих аргументов',
							'min':'Возвращает наименьшее число из своих аргументов',
							'pow':'Возвращает основание в степени экспоненты, то есть, значение выражения <var>основание<sup>экспонента</sup></var>',
							'random':'Возвращает псевдослучайное число в диапазоне от 0 до 1',
							'round':'Возвращает значение числа, округлённое до ближайшего целого',
							'sign':'Возвращает знак числа, указывающий, является ли число положительным, отрицательным или нулём',
							'sin':'Возвращает синус числа',
							'sinh':'Возвращает гиперболический синус числа',
							'sqrt':'Возвращает положительный квадратный корень числа',
							'tan':'Возвращает тангенс числа',
							'tanh':'Возвращает гиперболический тангенс числа',
							'trunc':'Возвращает целую часть числа, убирая дробные цифры'
						};
						for (var i=0;i<fs.length;i++)
							if (typeof Math[fs[i]]=='function')
							{
								var newRow=document.createElement("tr");
								newRow.innerHTML='<td>nn_'+fs[i]+'</td><td>'+(descriptions[fs[i]]||'-')+'</td><td style="background:#00FF0018;">O(log n)</td>';
								nonative.appendChild(newRow);
							}
					</script>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Как это работает?</h4>
					<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin-left: 25px;padding: 5px;text-indent: 20px;width: 490px;">
							<p> 2 декабря 2018 в JavaScript добавился тип <var>BigInt</var>, который позволил проводить расчёты с числами больше <var>9007199254740991</var>. </p>
							<p> Для хранения вещественной части воспользуемся хитростью: будем число умножать на некоторую константу (Далее <var>W</var>). </p>
							
						<br>
							<p> Общий вид <var>W = 1000...000n</var> </p>
							<p> <var>W = 1/&lt;точность вычислений&gt; = 1/eps</var> </p>
							<p> Например число <var>123.456</var> будет храниться как <var>123456000...000n</var> </p>
							<p> Можно заметить, что <var>W = 1</var> </p>
						<br>
							<p> Для <b>сложения</b> и <b>вычитания</b> ничего не меняется. Мы будем просто складывать числа. </p>
							<p> Например: <var>123.456 + 654.321 => 123456000...000n + 654321000...000n => 777777000...000n => 777.777</var></p>
						<br>
							<p> Для <b>умножения</b> и <b>деления</b> воспользуемся формулами:</p>
							<p> <var>A * B => A * B / W</var></p>
							<p> <var>A / B => A * W / B</var></p>
							<p> Например: <var>1 / 3 => (1000...000n(A) * 1000...000n(W)) / 3000...000n(B) => 333...333n => 0.333...333</var></p>
						<br>
							<p> Остальные функции работают по аналогии</p>
					</div>
					<h4 style="margin: 0px;margin-top:5px;text-align: center;">Как добавить свою функцию?</h4>
					<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin-left: 25px;padding: 5px;text-indent: 20px;width: 490px;">
							<p> Для выполнения в консоли (F12 или Ctrl + Shift + J)</p>
							<p style="text-indent: 0px;"> Не нативно: </p>
							<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;text-indent: 0px;"><pre style="margin: 3px;">Math.cube=(a)=>{return a*a*a}</pre></div>
							<p> Пример использования: <var>nn_cube(5)</var> </p>
						<br>
							<p style="text-indent: 0px;"> Нативно: </p>
<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;text-indent: 0px;"><pre style="margin: 3px;">
cl_add_function('cube',(a,w)=>{
  // a - массив аргументов
  if (a.length!=1) return; // проверяем что аргумент один
  return (a[0]**3n)/(w*w); // возвращаем значение
})</pre></div>
							<p> Пример использования: <var>cube(5)</var> </p>
							<br>
							<p> Хотите добавить свою функцию в главную ветку или есть предложения? Пишите на почту: <var>dima9school@mail.ru</var></p>
					</div>
				
				</div>
				<div style="">
					<h1 style="margin: 10px;margin-top: 10px;text-align: center;">Формула</h1>
					<textarea id="formula" style="height: 46px;min-height:16px;border-radius:4px;width:512px;margin: 10px;background:rgb(68,68,70);color:rgb(255,255,255);white-space: nowrap;resize: vertical;"></textarea>
				</div>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;display: inline-flex;width: 425px;"><pre id="output" style="margin: 3px;"></pre></div><button onclick="onupdate(-1)" style="background:rgb(68,68,70);color:rgb(255,255,255);border-radius: 11px;">Копировать</button>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output2" style="margin: 3px;"></pre></div>
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">
					<input style="border-radius: 4px;margin: 4px;font-size: 16px;background:rgb(68,68,70);color:rgb(255,255,255);width: 160px;" type="number" id="needbase" min="1" max="9007199254740991" value="2">-ричная <button onclick="onupdate(-2)" style="background:rgb(68,68,70);color:rgb(255,255,255);margin-left: 15px;border-radius: 11px;">Копировать</button>
				</h3>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output_bin" style="margin: 3px;"></pre></div>
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">Экспоненциальная запись числа <button onclick="onupdate(-3)" style="background:rgb(68,68,70);color:rgb(255,255,255);margin-left: 15px;border-radius: 11px;">Копировать</button></h3>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output_exp" style="margin: 3px;"></pre></div>
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">Непрерывная дробь <button onclick="onupdate(-6)" style="background:rgb(68,68,70);color:rgb(255,255,255);margin-left: 15px;border-radius: 11px;">Копировать</button></h3>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output_inf_fraction" style="margin: 3px;"></pre></div>
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">Диофантово приближение<button onclick="onupdate(-8)" style="background:rgb(68,68,70);color:rgb(255,255,255);margin-left: 15px;border-radius: 11px;">Копировать</button></h3>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output_fractions" style="margin: 3px;"></pre></div>
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">Римская система счисления <button onclick="onupdate(-4)" style="background:rgb(68,68,70);color:rgb(255,255,255);margin-left: 15px;border-radius: 11px;">Копировать</button></h3>
				<div style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="output_roman" style="margin: 3px;"></pre></div>
				
				<h3 style="margin: 0px;  margin-top: 30px;text-align: center;">Для выполнения в консоли (F12 или Ctrl + Shift + J)</h3>
				<div  style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="programm2" style="margin: 3px;"></pre></div>
				<div  style="background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;overflow-x: auto;overflow-y: hidden;"><pre id="programm" style="margin: 3px;"></pre></div>
			</div>
		</div>
		<div style="font-size: 11px;text-align: center;background: #444446;color:rgb(255,255,255);border: 1px solid rgb(127,127,127);border-radius: 3px;margin: 10px;position: absolute;width: 24px;height: 15px;right: 0px;bottom: 0px;">v1.2</div>
	</body>
</html>